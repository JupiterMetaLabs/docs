"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1532],{588:(e,n,d)=>{d.r(n),d.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"node-selection","title":"NodeSelection Package","description":"Production-ready VRF-based buddy node selection for distributed networks.","source":"@site/docs/node-selection.md","sourceDirName":".","slug":"/node-selection","permalink":"/docs/node-selection","draft":false,"unlisted":false,"editUrl":"https://github.com/JupiterMetaZK/docs/edit/main/docs/node-selection.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"SeedNode Module","permalink":"/docs/seednode"},"next":{"title":"AVC (Asyncronous Validation Consensus) Module","permalink":"/docs/avc"}}');var i=d(4848),s=d(8453);const o={},t="NodeSelection Package",l={},c=[{value:"Features",id:"features",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Import the Package",id:"1-import-the-package",level:3},{value:"2. Generate Keys from Mnemonic",id:"2-generate-keys-from-mnemonic",level:3},{value:"3. Select Buddy Nodes",id:"3-select-buddy-nodes",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"Core Functions",id:"core-functions",level:3},{value:"<code>GetBuddyNodes(ctx, nodeID, privateKey, networkSalt, peerDirAddress, numBuddies)</code>",id:"getbuddynodesctx-nodeid-privatekey-networksalt-peerdiraddress-numbuddies",level:4},{value:"<code>GetBuddyNodesWithNodes(ctx, nodeID, privateKey, networkSalt, nodes, numBuddies)</code>",id:"getbuddynodeswithnodesctx-nodeid-privatekey-networksalt-nodes-numbuddies",level:4},{value:"<code>GenerateKeysFromMnemonic(mnemonic)</code>",id:"generatekeysfrommnemonicmnemonic",level:4},{value:"Data Types",id:"data-types",level:3},{value:"<code>BuddyNode</code>",id:"buddynode",level:4},{value:"<code>Node</code>",id:"node",level:4},{value:"Required Dependencies",id:"required-dependencies",level:3},{value:"Usage Patterns",id:"usage-patterns",level:2},{value:"With Mock Data (Testing)",id:"with-mock-data-testing",level:3},{value:"With Real Peer Directory",id:"with-real-peer-directory",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Build Issues",id:"build-issues",level:3},{value:"Examples",id:"examples",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nodeselection-package",children:"NodeSelection Package"})}),"\n",(0,i.jsx)(n.p,{children:"Production-ready VRF-based buddy node selection for distributed networks."}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"VRF Buddy Selection"})," - Cryptographically secure, verifiable buddy selection"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"gRPC Integration"})," - Connect to peer directory for node discovery"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Mnemonic Support"})," - Generate keys from BIP39 mnemonic phrases"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Production Ready"})," - Comprehensive error handling and validation"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.h3,{id:"1-import-the-package",children:"1. Import the Package"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'import "gossipnode/AVC/NodeSelection/pkg/selection"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-generate-keys-from-mnemonic",children:"2. Generate Keys from Mnemonic"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'import (\n    "crypto/ed25519"\n    "gossipnode/AVC/NodeSelection/pkg/selection"\n)\n\n// Generate keys from mnemonic\npublicKey, privateKey, err := selection.GenerateKeysFromMnemonic("your twelve word mnemonic phrase here")\nif err != nil {\n    log.Fatal(err)\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-select-buddy-nodes",children:"3. Select Buddy Nodes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'import "context"\n\nctx := context.Background()\n\n// Select buddies from peer directory\nbuddies, err := selection.GetBuddyNodes(\n    ctx,\n    "your-node-id",\n    privateKey,\n    []byte("network-salt"),\n    "peer-directory:50051",\n    3, // number of buddies\n)\nif err != nil {\n    log.Fatal(err)\n}\n\n// Use the selected buddies\nfor _, buddy := range buddies {\n    fmt.Printf("Buddy: %s at %s\\n", buddy.Node.PeerId, buddy.Node.Address)\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "context"\n    "fmt"\n    "log"\n\n    "gossipnode/AVC/NodeSelection/pkg/selection"\n)\n\nfunc main() {\n    fmt.Println("\ud83d\ude80 NodeSelection Package Example")\n    fmt.Println("=================================")\n\n    // Generate keys from mnemonic\n    publicKey, privateKey, err := selection.GenerateKeysFromMnemonic("abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about")\n    if err != nil {\n        log.Fatalf("\u274c Failed to generate keys from mnemonic: %v", err)\n    }\n\n    fmt.Printf("\u2705 Generated keys from mnemonic\\n")\n    fmt.Printf("   Public Key: %x...\\n", publicKey[:8])\n    fmt.Println()\n\n    // Configuration\n    nodeID := "my-node-001"\n    networkSalt := []byte("my-network-salt-2024")\n    peerDirAddress := "localhost:50051"\n    numBuddies := 3\n\n    fmt.Printf("\ud83d\udd11 Node ID: %s\\n", nodeID)\n    fmt.Printf("\ud83d\udce1 Peer Directory: %s\\n", peerDirAddress)\n    fmt.Printf("\ud83c\udfb2 Selecting: %d buddies\\n", numBuddies)\n    fmt.Println()\n\n    // Select buddy nodes\n    ctx := context.Background()\n    buddies, err := selection.GetBuddyNodes(\n        ctx,\n        nodeID,\n        privateKey,\n        networkSalt,\n        peerDirAddress,\n        numBuddies,\n    )\n    if err != nil {\n        log.Fatalf("\u274c Failed to select buddies: %v", err)\n    }\n\n    // Display results\n    fmt.Printf("\u2705 Successfully selected %d buddies!\\n\\n", len(buddies))\n    fmt.Println("Selected Buddies:")\n    fmt.Println("=================")\n    for i, buddy := range buddies {\n        fmt.Printf("%2d. %-20s | %s | Score: %.2f | ASN: %d\\n",\n            i+1,\n            buddy.Node.PeerId,\n            buddy.Node.Address,\n            buddy.Node.SelectionScore,\n            buddy.Node.ASN,\n        )\n    }\n\n    fmt.Println("\\n\u2728 Example completed successfully!")\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,i.jsx)(n.h3,{id:"core-functions",children:"Core Functions"}),"\n",(0,i.jsx)(n.h4,{id:"getbuddynodesctx-nodeid-privatekey-networksalt-peerdiraddress-numbuddies",children:(0,i.jsx)(n.code,{children:"GetBuddyNodes(ctx, nodeID, privateKey, networkSalt, peerDirAddress, numBuddies)"})}),"\n",(0,i.jsx)(n.p,{children:"Selects buddy nodes from a peer directory service."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ctx"})," - Context for cancellation/timeout"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodeID"})," - Your node's unique identifier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"privateKey"})," - Ed25519 private key for VRF operations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"networkSalt"})," - Network-specific salt for VRF calculations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"peerDirAddress"}),' - Address of peer directory service ("host',":port",'")']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"numBuddies"})," - Number of buddy nodes to select"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"([]*BuddyNode, error)"})]}),"\n",(0,i.jsx)(n.h4,{id:"getbuddynodeswithnodesctx-nodeid-privatekey-networksalt-nodes-numbuddies",children:(0,i.jsx)(n.code,{children:"GetBuddyNodesWithNodes(ctx, nodeID, privateKey, networkSalt, nodes, numBuddies)"})}),"\n",(0,i.jsx)(n.p,{children:"Selects buddy nodes from a provided list of nodes (useful for testing)."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ctx"})," - Context for cancellation/timeout"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodeID"})," - Your node's unique identifier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"privateKey"})," - Ed25519 private key for VRF operations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"networkSalt"})," - Network-specific salt for VRF calculations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodes"})," - Slice of available nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"numBuddies"})," - Number of buddy nodes to select"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"([]*BuddyNode, error)"})]}),"\n",(0,i.jsx)(n.h4,{id:"generatekeysfrommnemonicmnemonic",children:(0,i.jsx)(n.code,{children:"GenerateKeysFromMnemonic(mnemonic)"})}),"\n",(0,i.jsx)(n.p,{children:"Generates Ed25519 keys from a BIP39 mnemonic phrase."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"mnemonic"})," - BIP39 mnemonic phrase (12 or 24 words)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," ",(0,i.jsx)(n.code,{children:"(ed25519.PublicKey, ed25519.PrivateKey, error)"})]}),"\n",(0,i.jsx)(n.h3,{id:"data-types",children:"Data Types"}),"\n",(0,i.jsx)(n.h4,{id:"buddynode",children:(0,i.jsx)(n.code,{children:"BuddyNode"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type BuddyNode struct {\n    Node  *Node\n    Proof []byte\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"node",children:(0,i.jsx)(n.code,{children:"Node"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type Node struct {\n    PeerId       string\n    Alias        string\n    Region       string\n    ASN          int\n    IPPrefix     string\n    Reachability string\n    RTTBucket    string\n    RTTMs        int\n    LastSeen     time.Time\n    Multiaddrs   []string\n    // Legacy fields for backward compatibility\n    ID              string\n    PublicKey       ed25519.PublicKey\n    Address         string\n    ReputationScore float64\n    SelectionScore  float64\n    LastSelectedRound uint64\n    IsActive        bool\n    Capacity        int\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"required-dependencies",children:"Required Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"The following dependencies are automatically included:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"github.com/tyler-smith/go-bip39"})," - BIP39 mnemonic support"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"github.com/yahoo/coname/vrf"})," - VRF operations"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"usage-patterns",children:"Usage Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"with-mock-data-testing",children:"With Mock Data (Testing)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// Create mock nodes for testing\nmockNodes := []selection.Node{\n    {\n        Node: types.Node{\n            PeerId: "node-1",\n            Address: "/ip4/127.0.0.1/tcp/8000",\n            ASN: 1001,\n            ReputationScore: 0.8,\n            IsActive: true,\n        },\n        SelectionScore: 0.7,\n    },\n    // ... more nodes\n}\n\nbuddies, err := selection.GetBuddyNodesWithNodes(\n    ctx, nodeID, privateKey, networkSalt, mockNodes, 3,\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"with-real-peer-directory",children:"With Real Peer Directory"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'buddies, err := selection.GetBuddyNodes(\n    ctx, nodeID, privateKey, networkSalt, "peer-dir:50051", 3,\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'buddies, err := selection.GetBuddyNodes(ctx, nodeID, privateKey, networkSalt, peerDir, 3)\nif err != nil {\n    switch err {\n    case selection.ErrNoPeersAvailable:\n        log.Println("No peers available for selection")\n    case selection.ErrVRFGenerationFailed:\n        log.Println("VRF generation failed")\n    default:\n        log.Printf("Selection error: %v", err)\n    }\n    return\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"No peers available"'})," - Ensure peer directory has registered nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"Connection refused"'})," - Check peer directory service is running"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"Invalid mnemonic"'})," - Verify mnemonic phrase is valid BIP39"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:'"VRF generation failed"'})," - Check private key and network salt"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"build-issues",children:"Build Issues"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install dependencies\ngo mod tidy\n\n# Verify build\ngo build ./AVC/NodeSelection/...\n"})}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.code,{children:"examples/"})," directory for complete working examples:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"examples/simple_usage.go"})," - Basic usage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"examples/use_nodeselection.go"})," - Multiple usage patterns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"examples/real_world_usage.go"})," - Real application integration"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,d)=>{d.d(n,{R:()=>o,x:()=>t});var r=d(6540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);