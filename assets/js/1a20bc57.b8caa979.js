"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9114],{7344:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"cli","title":"CLI Module","description":"Overview","source":"@site/docs/cli.md","sourceDirName":".","slug":"/cli","permalink":"/docs/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/JupiterMetaZK/docs/edit/main/docs/cli.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Logging Module","permalink":"/docs/logging"},"next":{"title":"Explorer Module","permalink":"/docs/explorer"}}');var r=s(4848),l=s(8453);const d={},a="CLI Module",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Purpose",id:"purpose",level:2},{value:"Key Components",id:"key-components",level:2},{value:"1. Interactive CLI",id:"1-interactive-cli",level:3},{value:"2. gRPC Server",id:"2-grpc-server",level:3},{value:"3. gRPC Client",id:"3-grpc-client",level:3},{value:"4. Command Handler",id:"4-command-handler",level:3},{value:"Usage",id:"usage",level:2},{value:"Interactive Mode",id:"interactive-mode",level:3},{value:"Command-Line Mode",id:"command-line-mode",level:3},{value:"gRPC API",id:"grpc-api",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Integration Points",id:"integration-points",level:2},{value:"Node Module",id:"node-module",level:3},{value:"FastSync Module",id:"fastsync-module",level:3},{value:"Database (DB_OPs)",id:"database-db_ops",level:3},{value:"Messaging Module",id:"messaging-module",level:3},{value:"DID Module",id:"did-module",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Logging",id:"logging",level:2},{value:"Security",id:"security",level:2},{value:"Performance",id:"performance",level:2},{value:"Testing",id:"testing",level:2},{value:"Example Commands",id:"example-commands",level:2},{value:"Peer Management",id:"peer-management",level:3},{value:"Messaging",id:"messaging",level:3},{value:"Network Information",id:"network-information",level:3},{value:"DID Operations",id:"did-operations",level:3},{value:"Synchronization",id:"synchronization",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cli-module",children:"CLI Module"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The CLI module provides a command-line interface and gRPC server for managing and interacting with the JMZK decentralized network node. It offers both interactive and programmatic access to node operations."}),"\n",(0,r.jsx)(n.h2,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsx)(n.p,{children:"The CLI module enables:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Interactive command-line interface for node management"}),"\n",(0,r.jsx)(n.li,{children:"gRPC API for programmatic node control"}),"\n",(0,r.jsx)(n.li,{children:"Peer management operations"}),"\n",(0,r.jsx)(n.li,{children:"Messaging and communication commands"}),"\n",(0,r.jsx)(n.li,{children:"Database state queries"}),"\n",(0,r.jsx)(n.li,{children:"Network statistics and monitoring"}),"\n",(0,r.jsx)(n.li,{children:"DID operations"}),"\n",(0,r.jsx)(n.li,{children:"FastSync operations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-components",children:"Key Components"}),"\n",(0,r.jsx)(n.h3,{id:"1-interactive-cli",children:"1. Interactive CLI"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File:"})," ",(0,r.jsx)(n.code,{children:"CLI.go"})]}),"\n",(0,r.jsx)(n.p,{children:"Provides an interactive command-line interface with the following commands:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Peer Management:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"addpeer <multiaddr>"}),": Add a peer to managed nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"removepeer <peer_id>"}),": Remove a peer from managed nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"listpeers"}),": List all managed peers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cleanpeers"}),": Clean offline peers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"addrs"}),": Show node addresses"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Messaging:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"msg <peer_multiaddr> <message>"}),": Send message via libp2p"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ygg <peer_multiaddr|ygg_ipv6> <message>"}),": Send message via Yggdrasil"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"broadcast <message>"}),": Broadcast message to all peers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"file <peer_multiaddr> <filepath> <remote_filename>"}),": Send file to peer"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Network Operations:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stats"}),": Show messaging statistics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dbstate"}),": Show database state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fastsync <peer_multiaddr>"}),": Fast sync with peer"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"syncinfo"}),": Show FastSync configuration"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"DID Operations:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"propagateDID <did> <public_key> [balance]"}),": Propagate DID to network"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getDID <did>"}),": Get DID document"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Discovery:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"listaliases"}),": List all peer aliases from seed node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"discoverneighbors"}),": Discover and add neighbors from seed node"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"seednodeStats"}),": Check seed node connection and statistics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mempoolStats"}),": Show mempool statistics"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"System:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gethstatus"}),": Show gETH server status (chain ID, ports)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stopservice"}),": Stop the service and exit"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"help"}),": Show help message"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-grpc-server",children:"2. gRPC Server"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File:"})," ",(0,r.jsx)(n.code,{children:"GRPC_Server.go"})]}),"\n",(0,r.jsx)(n.p,{children:"Provides gRPC service for programmatic access:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-protobuf",children:"service CLIService {\n    // Peer management\n    rpc ListPeers(google.protobuf.Empty) returns (PeerList);\n    rpc AddPeer(PeerRequest) returns (OperationResponse);\n    rpc RemovePeer(PeerRequest) returns (OperationResponse);\n    rpc CleanPeers(google.protobuf.Empty) returns (CleanPeersResponse);\n    \n    // Messaging\n    rpc SendMessage(MessageRequest) returns (OperationResponse);\n    rpc SendYggdrasilMessage(MessageRequest) returns (OperationResponse);\n    rpc SendFile(FileRequest) returns (OperationResponse);\n    rpc BroadcastMessage(MessageRequest) returns (OperationResponse);\n    rpc GetMessageStats(google.protobuf.Empty) returns (MessageStats);\n    \n    // DID Operations\n    rpc GetDID(DIDRequest) returns (DIDDocument);\n    rpc PropagateDID(DIDPropagationRequest) returns (OperationResponse);\n    \n    // Database Operations\n    rpc FastSync(PeerRequest) returns (SyncStats);\n    rpc GetDatabaseState(google.protobuf.Empty) returns (DatabaseStates);\n    \n    // Node Operations\n    rpc ReturnAddrs(google.protobuf.Empty) returns (Addrs);\n    rpc GetSyncInfo(google.protobuf.Empty) returns (SyncInfo);\n    rpc GetGethStatus(google.protobuf.Empty) returns (GethStatus);\n    \n    // Discovery\n    rpc DiscoverNeighbors(google.protobuf.Empty) returns (OperationResponse);\n    rpc ListAliases(google.protobuf.Empty) returns (AliasList);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-grpc-client",children:"3. gRPC Client"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File:"})," ",(0,r.jsx)(n.code,{children:"client.go"})]}),"\n",(0,r.jsx)(n.p,{children:"Client library for connecting to CLI gRPC server from external applications."}),"\n",(0,r.jsx)(n.h3,{id:"4-command-handler",children:"4. Command Handler"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File:"})," ",(0,r.jsx)(n.code,{children:"CLI.go"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"CommandHandler"})," struct manages command execution with dependencies:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Node instance"}),"\n",(0,r.jsx)(n.li,{children:"NodeManager for peer management"}),"\n",(0,r.jsx)(n.li,{children:"FastSync service"}),"\n",(0,r.jsx)(n.li,{children:"Database connections"}),"\n",(0,r.jsx)(n.li,{children:"Chain configuration"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.h3,{id:"interactive-mode",children:"Interactive Mode"}),"\n",(0,r.jsx)(n.p,{children:"Start the node with CLI enabled (default):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./jmdn\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then use commands interactively:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'>>> listpeers\n>>> addpeer /ip4/192.168.1.100/tcp/15000/p2p/Qm...\n>>> msg /ip4/192.168.1.100/tcp/15000/p2p/Qm... "Hello"\n>>> stats\n>>> dbstate\n'})}),"\n",(0,r.jsx)(n.h3,{id:"command-line-mode",children:"Command-Line Mode"}),"\n",(0,r.jsx)(n.p,{children:"Execute commands directly via command-line flag:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List peers\n./jmdn -cmd listpeers\n\n# Add peer\n./jmdn -cmd addpeer /ip4/192.168.1.100/tcp/15000/p2p/Qm...\n\n# Get DID\n./jmdn -cmd getdid did:jmzk:0x1234...\n\n# Fast sync\n./jmdn -cmd fastsync /ip4/192.168.1.100/tcp/15000/p2p/Qm...\n"})}),"\n",(0,r.jsx)(n.h3,{id:"grpc-api",children:"gRPC API"}),"\n",(0,r.jsx)(n.p,{children:"Connect to gRPC server (default port: 15053):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'import "gossipnode/CLI"\n\nclient, err := cli.NewClient("localhost:15053")\nif err != nil {\n    log.Fatal(err)\n}\ndefer client.Close()\n\n// List peers\npeers, err := client.ListPeers()\n\n// Send message\nresp, err := client.SendMessage(peerAddr, "Hello")\n\n// Get database state\nstate, err := client.GetDatabaseState()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.p,{children:"CLI server port can be configured via command-line flag:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./jmdn -cli 15053  # Default port\n"})}),"\n",(0,r.jsx)(n.h2,{id:"integration-points",children:"Integration Points"}),"\n",(0,r.jsx)(n.h3,{id:"node-module",children:"Node Module"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Uses ",(0,r.jsx)(n.code,{children:"node.NodeManager"})," for peer management"]}),"\n",(0,r.jsxs)(n.li,{children:["Accesses ",(0,r.jsx)(n.code,{children:"node.Node"})," for network operations"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"fastsync-module",children:"FastSync Module"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Uses ",(0,r.jsx)(n.code,{children:"fastsync.FastSync"})," for synchronization"]}),"\n",(0,r.jsx)(n.li,{children:"Manages sync operations"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"database-db_ops",children:"Database (DB_OPs)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Queries database state"}),"\n",(0,r.jsx)(n.li,{children:"Accesses account information"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"messaging-module",children:"Messaging Module"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Sends messages via libp2p"}),"\n",(0,r.jsx)(n.li,{children:"Broadcasts to network"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"did-module",children:"DID Module"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Propagates DID documents"}),"\n",(0,r.jsx)(n.li,{children:"Retrieves DID information"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"The CLI includes comprehensive error handling:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Invalid command errors"}),"\n",(0,r.jsx)(n.li,{children:"Connection failures"}),"\n",(0,r.jsx)(n.li,{children:"Peer management errors"}),"\n",(0,r.jsx)(n.li,{children:"Database errors"}),"\n",(0,r.jsx)(n.li,{children:"Network errors"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,r.jsx)(n.p,{children:"CLI operations are logged to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Console output (interactive mode)"}),"\n",(0,r.jsx)(n.li,{children:"gRPC server logs"}),"\n",(0,r.jsx)(n.li,{children:"Application logs"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Input validation for all commands"}),"\n",(0,r.jsx)(n.li,{children:"Peer address verification"}),"\n",(0,r.jsx)(n.li,{children:"Message sanitization"}),"\n",(0,r.jsx)(n.li,{children:"Access control via gRPC"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Non-blocking command execution"}),"\n",(0,r.jsx)(n.li,{children:"Concurrent peer operations"}),"\n",(0,r.jsx)(n.li,{children:"Efficient database queries"}),"\n",(0,r.jsx)(n.li,{children:"Connection pooling"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,r.jsx)(n.p,{children:"Test files:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CLI_test.go"}),": CLI command tests"]}),"\n",(0,r.jsx)(n.li,{children:"gRPC service tests"}),"\n",(0,r.jsx)(n.li,{children:"Integration tests"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"example-commands",children:"Example Commands"}),"\n",(0,r.jsx)(n.h3,{id:"peer-management",children:"Peer Management"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Add a peer\n>>> addpeer /ip4/192.168.1.100/tcp/15000/p2p/QmPeerID\n\n# List all peers\n>>> listpeers\n\n# Remove a peer\n>>> removepeer QmPeerID\n\n# Clean offline peers\n>>> cleanpeers\n"})}),"\n",(0,r.jsx)(n.h3,{id:"messaging",children:"Messaging"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Send message via libp2p\n>>> msg /ip4/192.168.1.100/tcp/15000/p2p/QmPeerID "Hello World"\n\n# Send message via Yggdrasil\n>>> ygg 200:abcd::1234 "Hello via Yggdrasil"\n\n# Broadcast message\n>>> broadcast "Network announcement"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"network-information",children:"Network Information"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Show statistics\n>>> stats\n\n# Show database state\n>>> dbstate\n\n# Show node addresses\n>>> addrs\n\n# Show gETH status\n>>> gethstatus\n"})}),"\n",(0,r.jsx)(n.h3,{id:"did-operations",children:"DID Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Propagate DID\n>>> propagateDID did:jmzk:0x1234... 0x5678... "1000000000000000000"\n\n# Get DID\n>>> getdid did:jmzk:0x1234...\n'})}),"\n",(0,r.jsx)(n.h3,{id:"synchronization",children:"Synchronization"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Fast sync with peer\n>>> fastsync /ip4/192.168.1.100/tcp/15000/p2p/QmPeerID\n\n# Show sync info\n>>> syncinfo\n"})}),"\n",(0,r.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Enhanced command history"}),"\n",(0,r.jsx)(n.li,{children:"Command aliases"}),"\n",(0,r.jsx)(n.li,{children:"Scripting support"}),"\n",(0,r.jsx)(n.li,{children:"Advanced filtering options"}),"\n",(0,r.jsx)(n.li,{children:"Performance monitoring commands"}),"\n",(0,r.jsx)(n.li,{children:"Network diagnostics"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var i=s(6540);const r={},l=i.createContext(r);function d(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);