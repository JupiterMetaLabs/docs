<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-mempool-routing-engine" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Mempool Routing Engine (MRE) | JupiterMetaZK Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.zkjm.io/docs/mempool-routing-engine"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mempool Routing Engine (MRE) | JupiterMetaZK Documentation"><meta data-rh="true" name="description" content="A high-performance control plane for decentralized mempool networks. The MRE provides deterministic transaction placement, replication, consensus, and retrieval across independent mempool nodes with high availability, fault tolerance, and low latency."><meta data-rh="true" property="og:description" content="A high-performance control plane for decentralized mempool networks. The MRE provides deterministic transaction placement, replication, consensus, and retrieval across independent mempool nodes with high availability, fault tolerance, and low latency."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.zkjm.io/docs/mempool-routing-engine"><link data-rh="true" rel="alternate" href="https://docs.zkjm.io/docs/mempool-routing-engine" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.zkjm.io/docs/mempool-routing-engine" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.124cd484.css">
<script src="/assets/js/runtime~main.a0a7549c.js" defer="defer"></script>
<script src="/assets/js/main.f8766115.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/jmzk-logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/jmzk-logo.png" alt="ZKJM Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/jmzk-logo.png" alt="ZKJM Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">JupiterMetaZK</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/intro">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advantages">Advantages</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/zk">Core Components</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zk">Zero-Knowledge Rollups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/did">Decentralized Identity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tokenomics">Tokenomics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/seednode-core">Seed Node</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/jmdt-node">JMDT Decentralized Node</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/mempool-routing-engine">Mempool Routing Engine (MRE)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/roadmap">Development &amp; Roadmap</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/roadmap">Roadmap</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/use-cases">Use Cases</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/use-cases">Use Cases</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core Components</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Mempool Routing Engine (MRE)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mempool Routing Engine (MRE)</h1></header>
<p>A high-performance control plane for decentralized mempool networks. The MRE provides deterministic transaction placement, replication, consensus, and retrieval across independent mempool nodes with high availability, fault tolerance, and low latency.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-latest-updates">ğŸ†• Latest Updates<a href="#-latest-updates" class="hash-link" aria-label="Direct link to ğŸ†• Latest Updates" title="Direct link to ğŸ†• Latest Updates">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-modern-hrw-integration-v20">ğŸš€ <strong>Modern HRW Integration (v2.0)</strong><a href="#-modern-hrw-integration-v20" class="hash-link" aria-label="Direct link to -modern-hrw-integration-v20" title="Direct link to -modern-hrw-integration-v20">â€‹</a></h3>
<ul>
<li>âœ… <strong>HRW Manager</strong>: Complete epoch-based HRW Manager with Redis Streams integration</li>
<li>âœ… <strong>Dynamic Weight Updates</strong>: Automatic HRW weight updates via <code>ChangeWeightage()</code> function</li>
<li>âœ… <strong>Redis Streams Publishing</strong>: Real-time transaction placement publishing to Redis Streams</li>
<li>âœ… <strong>Epoch-based Configuration</strong>: Historical transaction stability with dynamic weight updates</li>
<li>âœ… <strong>Multi-format NodeID Support</strong>: Flexible NodeID to ShardID conversion for various naming patterns</li>
<li>âœ… <strong>Weight Scheduler Integration</strong>: Automatic HRW Manager updates when new weights are calculated</li>
<li>âœ… <strong>Reflection-based Integration</strong>: Seamless HRW Manager integration without circular imports</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-enhanced-features">ğŸ”§ <strong>Enhanced Features</strong><a href="#-enhanced-features" class="hash-link" aria-label="Direct link to -enhanced-features" title="Direct link to -enhanced-features">â€‹</a></h3>
<ul>
<li>âœ… <strong>HRW - Weights Algorithm</strong>: Advanced weighted selection based on system metrics, mempool capacity, and fee affordability</li>
<li>âœ… <strong>High Throughput Testing</strong>: Enhanced test clients supporting 1000+ transactions per second</li>
<li>âœ… <strong>Real-time Metrics</strong>: Redis integration for live system and mempool metrics</li>
<li>âœ… <strong>Latency-aware Routing</strong>: Network latency measurement and exclusion of unreachable mempools</li>
<li>âœ… <strong>Weight Scheduler</strong>: Background process for periodic weight updates (configurable interval)</li>
<li>âœ… <strong>Enhanced Go Client</strong>: Multi-worker concurrent transaction testing with real-time statistics</li>
<li>âœ… <strong>Python Test Clients</strong>: Alternative test clients with async support and batch processing</li>
<li>âœ… <strong>Flexible Server URLs</strong>: Command-line URL arguments for testing different environments</li>
<li>âœ… <strong>Integrated MRE Binary</strong>: Single executable with all modules integrated</li>
<li>âœ… <strong>Run-All Command</strong>: Start all modules simultaneously with one command</li>
<li>âœ… <strong>JSON Configuration</strong>: Mempool addresses configurable via JSON file</li>
<li>âœ… <strong>Redis Integration</strong>: Real-time log storage and analytics with Redis</li>
<li>âœ… <strong>Logging Server</strong>: Dedicated NATS consumer with Redis persistence</li>
<li>âœ… <strong>Unified CLI</strong>: Single MRE binary with server, logging, and run-all subcommands</li>
<li>âœ… <strong>Docker Support</strong>: Redis container setup and testing</li>
<li>âœ… <strong>Comprehensive Testing</strong>: Full client-server integration tests</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ï¸-architecture-overview">ğŸ—ï¸ Architecture Overview<a href="#ï¸-architecture-overview" class="hash-link" aria-label="Direct link to ğŸ—ï¸ Architecture Overview" title="Direct link to ğŸ—ï¸ Architecture Overview">â€‹</a></h2>
<p>The Mempool Routing Engine acts as a smart proxy between JMDT (JMDT) nodes and actual mempool servers, providing:</p>
<ul>
<li><strong>Transaction Validation</strong>: Comprehensive Ethereum transaction format validation</li>
<li><strong>Modern HRW Manager</strong>: Epoch-based HRW Manager with Redis Streams integration for intelligent routing</li>
<li><strong>Dynamic Weight Updates</strong>: Automatic weight updates via <code>ChangeWeightage()</code> when new weights are calculated</li>
<li><strong>Redis Streams Publishing</strong>: Real-time transaction placement decisions published to Redis Streams</li>
<li><strong>Intelligent Routing</strong>: Deterministic placement across multiple mempool nodes with HRW weights algorithm</li>
<li><strong>HRW Weights Algorithm</strong>: Advanced weighted selection based on system metrics, mempool capacity, and fee affordability</li>
<li><strong>Centralized Logging</strong>: NATS JetStream-based log aggregation and routing</li>
<li><strong>Redis Persistence</strong>: Real-time log storage and analytics with Redis</li>
<li><strong>High Availability</strong>: Fault-tolerant design with automatic failover</li>
<li><strong>Real-time Monitoring</strong>: Comprehensive metrics and health checks</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-architecture">System Architecture<a href="#system-architecture" class="hash-link" aria-label="Direct link to System Architecture" title="Direct link to System Architecture">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚   JMDT Node-1   â”‚    â”‚   JMDT Node-2   â”‚    â”‚   JMDT Node-N   â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          â”‚                      â”‚                      â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          â”‚     gRPC (Port 8080) â”‚                      â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 â–¼</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚  Mempool Routing Engine â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚    (gRPC Server)        â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚     localhost:8080      â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                              â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚   Mempool Servers       â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚ 192.168.100.40:16002    â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                              â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚    NATS JetStream       â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚    localhost:4222       â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚                         â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚ â€¢ mempool_system_metricsâ”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚ â€¢ mempool_mempool_metricsâ”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚ â€¢ mempool_application_logsâ”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                              â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚   Logging Server        â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚   (NATS Consumer)       â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚   localhost:6379        â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                              â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚      Redis              â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚   (Log Storage)         â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â”‚   localhost:6379        â”‚</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-quick-start">ğŸš€ Quick Start<a href="#-quick-start" class="hash-link" aria-label="Direct link to ğŸš€ Quick Start" title="Direct link to ğŸš€ Quick Start">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">â€‹</a></h3>
<ul>
<li>Go 1.22+</li>
<li>NATS Server</li>
<li>Redis Server</li>
<li>Docker (for Redis container)</li>
<li>buf (for protobuf generation)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-quick-start-command">ğŸš€ Quick Start Command<a href="#-quick-start-command" class="hash-link" aria-label="Direct link to ğŸš€ Quick Start Command" title="Direct link to ğŸš€ Quick Start Command">â€‹</a></h3>
<p><strong>Start all services with one command:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Build the MRE binary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go build -o MRE .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Set up mempool configuration (first time only)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp mempoolAddress.example.json mempoolAddress.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules simultaneously (RECOMMENDED)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -server-port=8080 -stream=all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Alternative: Start with custom settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -server-port=8080 -stream=all -nats-url=nats://localhost:4222 -redis=localhost:6379 -config=custom-mempools.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Use custom mempool configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -config=custom-mempools.json -server-port=8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>What this does:</strong></p>
<ul>
<li>âœ… Starts gRPC server on port 8080</li>
<li>âœ… Starts logging server with all streams</li>
<li>âœ… Connects to NATS and Redis</li>
<li>âœ… Loads mempool configurations from <code>mempoolAddress.json</code></li>
<li>âœ… Initializes all configured mempool connections</li>
<li>âœ… Ready to handle transactions immediately</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-mempool-configuration">ğŸ“‹ Mempool Configuration<a href="#-mempool-configuration" class="hash-link" aria-label="Direct link to ğŸ“‹ Mempool Configuration" title="Direct link to ğŸ“‹ Mempool Configuration">â€‹</a></h3>
<p>The MRE uses a JSON configuration file to manage mempool server connections. This makes it easy to add, remove, or modify mempool servers without changing code.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-configuration-file-mempooladdressjson"><strong>Default Configuration File: <code>mempoolAddress.json</code></strong><a href="#default-configuration-file-mempooladdressjson" class="hash-link" aria-label="Direct link to default-configuration-file-mempooladdressjson" title="Direct link to default-configuration-file-mempooladdressjson">â€‹</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;mempools&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;nodeID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.100.40:16002&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Local mempool server&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;nodeID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;34.35.105.162:16003&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GCP mempool server 2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;nodeID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;34.32.109.236:16003&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GCP mempool server 3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;nodeID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-4&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;34.96.183.179:16003&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GCP mempool server 4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;nodeID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-5&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;34.174.191.157:16003&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GCP mempool server 5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;nodeID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-6&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;address&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0.0.0.0:50051&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;description&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Sai mempool server 6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-configuration"><strong>Setting Up Configuration</strong><a href="#setting-up-configuration" class="hash-link" aria-label="Direct link to setting-up-configuration" title="Direct link to setting-up-configuration">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy the example configuration file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp mempoolAddress.example.json mempoolAddress.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Edit the configuration file with your mempool addresses</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano mempoolAddress.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">vim mempoolAddress.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-custom-configuration"><strong>Using Custom Configuration</strong><a href="#using-custom-configuration" class="hash-link" aria-label="Direct link to using-custom-configuration" title="Direct link to using-custom-configuration">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Use default configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Use custom configuration file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -config=production-mempools.json -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Use custom configuration with run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -config=dev-mempools.json -server-port=8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-benefits"><strong>Configuration Benefits</strong><a href="#configuration-benefits" class="hash-link" aria-label="Direct link to configuration-benefits" title="Direct link to configuration-benefits">â€‹</a></h4>
<ul>
<li>ğŸ”§ <strong>Easy Management</strong>: Add/remove mempools without code changes</li>
<li>ğŸŒ <strong>Environment Specific</strong>: Different configs for dev/staging/prod</li>
<li>ğŸ“ <strong>Descriptive</strong>: Each mempool has a description field</li>
<li>ğŸ”„ <strong>Hot Swappable</strong>: Change configs without rebuilding</li>
<li>ğŸ“Š <strong>Better Logging</strong>: Shows which config file is loaded</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="macos">macOS<a href="#macos" class="hash-link" aria-label="Direct link to macOS" title="Direct link to macOS">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Clone the repository</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone &lt;repository-url&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd Mempool-Routing-Engine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install dependencies</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod tidy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod download</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install buf for protobuf generation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew install bufbuild/buf/buf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install NATS server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew install nats-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Redis (or use Docker)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew install redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Docker (for Redis container)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Download from https://www.docker.com/products/docker-desktop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install grpcurl for testing (optional)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew install grpcurl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux-ubuntudebian">Linux (Ubuntu/Debian)<a href="#linux-ubuntudebian" class="hash-link" aria-label="Direct link to Linux (Ubuntu/Debian)" title="Direct link to Linux (Ubuntu/Debian)">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Clone the repository</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone &lt;repository-url&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd Mempool-Routing-Engine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install dependencies</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod tidy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod download</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install buf for protobuf generation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Download from https://github.com/bufbuild/buf/releases</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -sSL &quot;https://github.com/bufbuild/buf/releases/latest/download/buf-$(uname -s)-$(uname -m)&quot; -o &quot;/usr/local/bin/buf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x &quot;/usr/local/bin/buf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install NATS server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L https://github.com/nats-io/nats-server/releases/download/v2.11.8/nats-server-v2.11.8-arm64.deb -o nats-server.zip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">unzip nats-server.zip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo mv nats-server-v2.10.0-linux-amd64/nats-server /usr/local/bin/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rm -rf nats-server.zip nats-server-v2.10.0-linux-amd64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt install redis-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Docker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -fsSL https://get.docker.com -o get-docker.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo sh get-docker.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo usermod -aG docker $USER</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install grpcurl for testing (optional)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux-centosrhelfedora">Linux (CentOS/RHEL/Fedora)<a href="#linux-centosrhelfedora" class="hash-link" aria-label="Direct link to Linux (CentOS/RHEL/Fedora)" title="Direct link to Linux (CentOS/RHEL/Fedora)">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Clone the repository</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone &lt;repository-url&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd Mempool-Routing-Engine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install dependencies</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod tidy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod download</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install buf for protobuf generation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Download from https://github.com/bufbuild/buf/releases</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -sSL &quot;https://github.com/bufbuild/buf/releases/latest/download/buf-$(uname -s)-$(uname -m)&quot; -o &quot;/usr/local/bin/buf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x &quot;/usr/local/bin/buf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install NATS server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L https://github.com/nats-io/nats-server/releases/latest/download/nats-server-v2.10.0-linux-amd64.zip -o nats-server.zip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">unzip nats-server.zip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo mv nats-server-v2.10.0-linux-amd64/nats-server /usr/local/bin/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rm -rf nats-server.zip nats-server-v2.10.0-linux-amd64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># For CentOS/RHEL:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo yum install epel-release</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo yum install redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># For Fedora:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo dnf install redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Docker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -fsSL https://get.docker.com -o get-docker.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo sh get-docker.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo usermod -aG docker $USER</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install grpcurl for testing (optional)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="windows">Windows<a href="#windows" class="hash-link" aria-label="Direct link to Windows" title="Direct link to Windows">â€‹</a></h4>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Clone the repository</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone &lt;repository-url&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd Mempool-Routing-Engine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install dependencies</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod tidy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go mod download</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install buf for protobuf generation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Download from https://github.com/bufbuild/buf/releases</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Extract buf.exe to a directory in your PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install NATS server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Download from https://github.com/nats-io/nats-server/releases</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Extract nats-server.exe to a directory in your PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Option 1: Using Chocolatey</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">choco install redis-64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Option 2: Using Scoop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scoop install redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Option 3: Download from https://github.com/microsoftarchive/redis/releases</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install Docker Desktop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Download from https://www.docker.com/products/docker-desktop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Install grpcurl for testing (optional)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-run">Build and Run<a href="#build-and-run" class="hash-link" aria-label="Direct link to Build and Run" title="Direct link to Build and Run">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Generate protobuf code</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buf generate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Build the integrated MRE binary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make build</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Or build directly</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go build -o MRE .</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Build test client separately</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go build -o bin/test-client ./Tests</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-system">Start the System<a href="#start-the-system" class="hash-link" aria-label="Direct link to Start the System" title="Direct link to Start the System">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="all-platforms">All Platforms<a href="#all-platforms" class="hash-link" aria-label="Direct link to All Platforms" title="Direct link to All Platforms">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 1. Start Redis (using Docker)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --name mempool-redis -p 6379:6379 redis:7-alpine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 2. Start NATS JetStream server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># macOS/Linux:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nats-server -c ./nats-server.conf &amp;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Windows (PowerShell):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Start-Process -NoNewWindow nats-server -ArgumentList &quot;-c&quot;, &quot;./nats-server.conf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 3. Set up JetStream streams</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># macOS/Linux:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/setup-streams.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Windows (PowerShell):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">.\scripts\setup-streams.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 4. Start the system (choose one method)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Method A: Run all modules simultaneously (RECOMMENDED)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Method B: Run modules separately</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Terminal 1 - Start the server:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Terminal 2 - Start the logging server:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE loggingServer -stream=all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Method C: Using Makefile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># 5. Test the system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># macOS/Linux:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/test-client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Windows:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">.\bin\test-client.exe</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="platform-specific-notes">Platform-Specific Notes<a href="#platform-specific-notes" class="hash-link" aria-label="Direct link to Platform-Specific Notes" title="Direct link to Platform-Specific Notes">â€‹</a></h4>
<p><strong>macOS/Linux:</strong></p>
<ul>
<li>Use <code>&amp;</code> to run processes in background</li>
<li>Use <code>./</code> prefix for executable files</li>
<li>Use forward slashes <code>/</code> for paths</li>
</ul>
<p><strong>Windows:</strong></p>
<ul>
<li>Use <code>Start-Process</code> for background processes</li>
<li>Use <code>.\</code> prefix for executable files</li>
<li>Use backslashes <code>\</code> for paths</li>
<li>Ensure PowerShell execution policy allows scripts: <code>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-options">Command-Line Options<a href="#command-line-options" class="hash-link" aria-label="Direct link to Command-Line Options" title="Direct link to Command-Line Options">â€‹</a></h3>
<p>The MRE binary supports multiple subcommands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Show help message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE help</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start routing engine server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start server with custom mempool configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -config=custom-mempools.json -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start logging server with Redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE loggingServer -stream=all -redis=localhost:6379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Run all modules simultaneously (RECOMMENDED)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Run all modules with custom configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -config=production-mempools.json -server-port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Show help for specific commands</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -help</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE loggingServer -help</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="available-subcommands">Available Subcommands:<a href="#available-subcommands" class="hash-link" aria-label="Direct link to Available Subcommands:" title="Direct link to Available Subcommands:">â€‹</a></h4>
<p><strong><code>server</code></strong> - Start the gRPC routing engine server</p>
<ul>
<li><code>-port</code>: Port to listen on (default: 8080)</li>
<li><code>-config</code>: Path to mempool configuration JSON file (default: mempoolAddress.json)</li>
<li><code>-weight-interval</code>: Weight update interval (default: 5m)</li>
<li><code>-help</code>: Show server help message</li>
</ul>
<p><strong><code>loggingServer</code></strong> - Start the logging server for real-time log monitoring</p>
<ul>
<li><code>-url</code>: NATS server URL (default: nats://localhost:4222)</li>
<li><code>-stream</code>: Stream type to consume (all, system, mempool, app)</li>
<li><code>-redis</code>: Redis server URL (default: localhost:6379)</li>
<li><code>-redis-password</code>: Redis password (default: empty)</li>
<li><code>-redis-db</code>: Redis database number (default: 0)</li>
</ul>
<p><strong><code>run-all</code></strong> - Start both server and logging server simultaneously</p>
<ul>
<li><code>-server-port</code>: Port for the gRPC server (default: 8080)</li>
<li><code>-config</code>: Path to mempool configuration JSON file (default: mempoolAddress.json)</li>
<li><code>-weight-interval</code>: Weight update interval (default: 5m)</li>
<li><code>-stream</code>: Stream type for logging server (default: all)</li>
<li><code>-nats-url</code>: NATS server URL (default: nats://localhost:4222)</li>
<li><code>-redis</code>: Redis server URL (default: localhost:6379)</li>
<li><code>-redis-password</code>: Redis password (default: empty)</li>
<li><code>-redis-db</code>: Redis database number (default: 0)</li>
</ul>
<p><strong><code>test-weights</code></strong> - Test the HRW weights algorithm with real-time metrics</p>
<ul>
<li><code>-redis</code>: Redis server URL for real-time metrics (optional)</li>
<li>Demonstrates weight calculation with live system and mempool data</li>
<li>Tests HRW Manager integration with dynamic weight updates</li>
<li>Validates NodeID to ShardID conversion for various formats</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-running-all-modules">ğŸš€ Running All Modules<a href="#-running-all-modules" class="hash-link" aria-label="Direct link to ğŸš€ Running All Modules" title="Direct link to ğŸš€ Running All Modules">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start-with-run-all">Quick Start with <code>run-all</code><a href="#quick-start-with-run-all" class="hash-link" aria-label="Direct link to quick-start-with-run-all" title="Direct link to quick-start-with-run-all">â€‹</a></h3>
<p>The easiest way to start the entire MRE system is using the <code>run-all</code> command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules with default settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules with custom server port</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -server-port=9090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules with custom mempool configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -config=production-mempools.json -server-port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules with custom settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -server-port=9090 -stream=system -nats-url=nats://localhost:4222</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Test the HRW weights algorithm with HRW Manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE test-weights -redis localhost:6379</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-makefile">Using Makefile<a href="#using-makefile" class="hash-link" aria-label="Direct link to Using Makefile" title="Direct link to Using Makefile">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules with custom server port</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-all SERVER_PORT=9090</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-run-all-does">What <code>run-all</code> Does<a href="#what-run-all-does" class="hash-link" aria-label="Direct link to what-run-all-does" title="Direct link to what-run-all-does">â€‹</a></h3>
<p>The <code>run-all</code> command starts both modules simultaneously:</p>
<ol>
<li><strong>gRPC Server</strong> - Handles transaction routing and validation</li>
<li><strong>Logging Server</strong> - Consumes NATS streams and stores logs in Redis</li>
</ol>
<p>Both modules run concurrently and can be stopped together with <code>Ctrl+C</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-modules-separately">Running Modules Separately<a href="#running-modules-separately" class="hash-link" aria-label="Direct link to Running Modules Separately" title="Direct link to Running Modules Separately">â€‹</a></h3>
<p>If you prefer to run modules in separate terminals:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Terminal 1 - Start the server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Terminal 1 - Start the server with custom config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -config=custom-mempools.json -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Terminal 2 - Start the logging server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE loggingServer -stream=all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-testing">ğŸ§ª Testing<a href="#-testing" class="hash-link" aria-label="Direct link to ğŸ§ª Testing" title="Direct link to ğŸ§ª Testing">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-throughput-testing">High Throughput Testing<a href="#high-throughput-testing" class="hash-link" aria-label="Direct link to High Throughput Testing" title="Direct link to High Throughput Testing">â€‹</a></h3>
<p>The MRE includes comprehensive high throughput testing capabilities to validate performance under load:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-go-test-client"><strong>Enhanced Go Test Client</strong><a href="#enhanced-go-test-client" class="hash-link" aria-label="Direct link to enhanced-go-test-client" title="Direct link to enhanced-go-test-client">â€‹</a></h4>
<p>The enhanced <code>transaction_client.go</code> now supports high throughput testing with multiple worker goroutines:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># High throughput test - 1000 tx/sec for 60 seconds with 10 workers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run transaction_client.go -high-throughput -rate=1000 -duration=60 -workers=10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Stress test - 2000 tx/sec for 30 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run transaction_client.go -high-throughput -rate=2000 -duration=30 -workers=20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Custom server URL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run transaction_client.go -high-throughput -server=34.174.63.179:8080 -rate=500 -duration=30</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Batch testing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run transaction_client.go -batch -batch-count=10 -batch-size=100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Traditional testing (still available)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run transaction_client.go -count=50 -delay=500ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="python-test-clients"><strong>Python Test Clients</strong><a href="#python-test-clients" class="hash-link" aria-label="Direct link to python-test-clients" title="Direct link to python-test-clients">â€‹</a></h4>
<p>Alternative Python clients provide additional testing flexibility:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># High throughput Python client (gRPC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">python3 high_throughput_client.py --mode throughput --rate=1000 --duration=60 --workers=10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Simple Python client (gRPC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">python3 simple_python_client.py --mode throughput --rate=1000 --duration=60 --workers=10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># HTTP-based client (no gRPC dependencies)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">python3 simple_http_client.py --mode throughput --rate=1000 --duration=60 --workers=10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Batch testing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">python3 high_throughput_client.py --mode batch --batch-size=100 --batches=10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Custom server URL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">python3 high_throughput_client.py --server=34.174.63.179:8080 --mode throughput --rate=500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Python Client Options:</strong></p>
<ul>
<li><strong><code>high_throughput_client.py</code></strong>: Full-featured async client with advanced statistics</li>
<li><strong><code>simple_python_client.py</code></strong>: Basic gRPC client for simple testing</li>
<li><strong><code>simple_http_client.py</code></strong>: HTTP-based client (bypasses gRPC compilation)</li>
</ul>
<p>See <a href="/docs/Tests/PYTHON_README.md">Tests/PYTHON_README.md</a> for detailed Python client documentation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="unified-test-runner"><strong>Unified Test Runner</strong><a href="#unified-test-runner" class="hash-link" aria-label="Direct link to unified-test-runner" title="Direct link to unified-test-runner">â€‹</a></h4>
<p>Use the shell script for easy testing with different configurations:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Quick start - default high throughput test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./run_python_tests.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Custom rate and duration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./run_python_tests.sh throughput --rate=500 --duration=30 --workers=5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Different server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./run_python_tests.sh --url=localhost:8080 throughput --rate=1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Batch testing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./run_python_tests.sh batch --batch-size=50 --batches=20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Stress test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./run_python_tests.sh stress</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Run all tests</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./run_python_tests.sh all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="test-features"><strong>Test Features</strong><a href="#test-features" class="hash-link" aria-label="Direct link to test-features" title="Direct link to test-features">â€‹</a></h4>
<ul>
<li><strong>ğŸš€ High Performance</strong>: Support for 1000+ transactions per second</li>
<li><strong>ğŸ‘¥ Concurrent Workers</strong>: Multiple worker threads/goroutines for parallel processing</li>
<li><strong>ğŸ“Š Real-time Statistics</strong>: Live success/failure rates and performance metrics</li>
<li><strong>ğŸ¯ Configurable Parameters</strong>: Rate, duration, workers, batch size, server URL</li>
<li><strong>ğŸ”„ Multiple Test Modes</strong>: Throughput, batch, stress testing</li>
<li><strong>ğŸ“ˆ Performance Monitoring</strong>: Rate efficiency, success rates, duration tracking</li>
<li><strong>ğŸŒ Flexible Server URLs</strong>: Test against different MRE instances</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-expectations"><strong>Performance Expectations</strong><a href="#performance-expectations" class="hash-link" aria-label="Direct link to performance-expectations" title="Direct link to performance-expectations">â€‹</a></h4>
<table><thead><tr><th>Test Type</th><th>Rate</th><th>Duration</th><th>Workers</th><th>Expected Success Rate</th></tr></thead><tbody><tr><td><strong>Throughput</strong></td><td>1000 tx/sec</td><td>60s</td><td>10</td><td>95%+</td></tr><tr><td><strong>Stress</strong></td><td>2000 tx/sec</td><td>30s</td><td>20</td><td>90%+</td></tr><tr><td><strong>Batch</strong></td><td>100 tx/batch</td><td>10 batches</td><td>N/A</td><td>98%+</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="redis-integration-testing">Redis Integration Testing<a href="#redis-integration-testing" class="hash-link" aria-label="Direct link to Redis Integration Testing" title="Direct link to Redis Integration Testing">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-docker-all-platforms">Using Docker (All Platforms)<a href="#using-docker-all-platforms" class="hash-link" aria-label="Direct link to Using Docker (All Platforms)" title="Direct link to Using Docker (All Platforms)">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check Redis connection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli ping</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># View all stored logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli keys &quot;*&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get latest system metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli hgetall &quot;mempool:logs:system:metrics:mempool-clean-01&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># View recent log entries</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli lrange &quot;mempool:logs:system:list&quot; 0 -1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get specific log entry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli get &quot;mempool:logs:system:mempool-clean-01:1757000902710939000&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-local-redis-installation">Using Local Redis Installation<a href="#using-local-redis-installation" class="hash-link" aria-label="Direct link to Using Local Redis Installation" title="Direct link to Using Local Redis Installation">â€‹</a></h4>
<p><strong>macOS/Linux:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check Redis connection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli ping</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># View all stored logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli keys &quot;*&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get latest system metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli hgetall &quot;mempool:logs:system:metrics:mempool-clean-01&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># View recent log entries</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli lrange &quot;mempool:logs:system:list&quot; 0 -1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Windows:</strong></p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check Redis connection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli ping</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># View all stored logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli keys &quot;*&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get latest system metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli hgetall &quot;mempool:logs:system:metrics:mempool-clean-01&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># View recent log entries</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli lrange &quot;mempool:logs:system:list&quot; 0 -1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-with-grpcurl">Test with grpcurl<a href="#test-with-grpcurl" class="hash-link" aria-label="Direct link to Test with grpcurl" title="Direct link to Test with grpcurl">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># List available services</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">grpcurl -plaintext localhost:8080 list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Test GetTransaction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">grpcurl -plaintext -d &#x27;{&quot;hash&quot;: &quot;0x123...&quot;}&#x27; localhost:8080 proto.MempoolService.GetTransaction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Test OnReceiveFromJMDT with valid transaction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">grpcurl -plaintext -d &#x27;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;nodeId&quot;: &quot;JMDT-Node-001&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;singleTransaction&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;hash&quot;: &quot;0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;from&quot;: &quot;0xF39fd6e51aad88F6F4ce6aB8827279cffFb92266&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;to&quot;: &quot;0x8ba1f109551bD432803012645Ac136ddd64DBA72&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;value&quot;: &quot;10000000000000000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;EIP-1559&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;timestamp&quot;: &quot;2025-09-03T08:45:32Z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;chainId&quot;: &quot;11155111&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;nonce&quot;: &quot;42&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;gasLimit&quot;: &quot;21000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;maxFee&quot;: &quot;25000000000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;maxPriorityFee&quot;: &quot;2000000000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;data&quot;: &quot;0x&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;v&quot;: &quot;0x1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;r&quot;: &quot;0x2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;s&quot;: &quot;0x3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;timestamp&quot;: &quot;2025-09-03T08:45:32Z&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27; localhost:8080 proto.MempoolService.OnReceiveFromJMDT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-results">Test Results<a href="#test-results" class="hash-link" aria-label="Direct link to Test Results" title="Direct link to Test Results">â€‹</a></h3>
<p>âœ… <strong>Valid Transaction</strong>: Successfully processed and forwarded to mempool
âœ… <strong>Invalid Transaction</strong>: Properly rejected with validation errors
âœ… <strong>Batch Processing</strong>: Handles multiple transactions efficiently
âœ… <strong>Redis Integration</strong>: Logs successfully stored and retrievable
âœ… <strong>NATS Consumer</strong>: Real-time log processing working
âœ… <strong>Multi-Command CLI</strong>: All subcommands functional
âœ… <strong>HRW Weights Algorithm</strong>: Advanced weighted selection working correctly</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-api-reference">ğŸ“¡ API Reference<a href="#-api-reference" class="hash-link" aria-label="Direct link to ğŸ“¡ API Reference" title="Direct link to ğŸ“¡ API Reference">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grpc-service-methods">gRPC Service Methods<a href="#grpc-service-methods" class="hash-link" aria-label="Direct link to gRPC Service Methods" title="Direct link to gRPC Service Methods">â€‹</a></h3>
<table><thead><tr><th>Method</th><th>Description</th><th>Status</th></tr></thead><tbody><tr><td><code>OnReceiveFromJMDT</code></td><td>Main method for receiving transactions from JMDT nodes</td><td>âœ… Implemented</td></tr><tr><td><code>GetTransaction</code></td><td>Retrieve a specific transaction by hash</td><td>âœ… Implemented</td></tr><tr><td><code>SubmitTransaction</code></td><td>Submit a single transaction</td><td>âš ï¸ Not implemented</td></tr><tr><td><code>SubmitTransactions</code></td><td>Submit multiple transactions</td><td>âš ï¸ Not implemented</td></tr><tr><td><code>GetPendingTransactions</code></td><td>Get pending transactions</td><td>âš ï¸ Not implemented</td></tr><tr><td><code>GetMempoolStats</code></td><td>Get mempool statistics</td><td>âš ï¸ Not implemented</td></tr><tr><td><code>GetFeeStatistics</code></td><td>Get fee statistics</td><td>âš ï¸ Not implemented</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-validation">Transaction Validation<a href="#transaction-validation" class="hash-link" aria-label="Direct link to Transaction Validation" title="Direct link to Transaction Validation">â€‹</a></h3>
<p>The routing engine validates transactions against these criteria:</p>
<ul>
<li><strong>Required Fields</strong>: Hash, From, To, Value, Type, ChainId, Nonce, GasLimit</li>
<li><strong>Format Validation</strong>:<!-- -->
<ul>
<li>Hash: Must start with &quot;0x&quot; and be 66 characters</li>
<li>Addresses: Must start with &quot;0x&quot; and be 42 characters</li>
</ul>
</li>
<li><strong>Empty Field Detection</strong>: Trims whitespace and rejects empty fields</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-hrw-weights-algorithm">ğŸ§® HRW Weights Algorithm<a href="#-hrw-weights-algorithm" class="hash-link" aria-label="Direct link to ğŸ§® HRW Weights Algorithm" title="Direct link to ğŸ§® HRW Weights Algorithm">â€‹</a></h2>
<p>The MRE includes an advanced <strong>Highest Random Weight (HRW)</strong> algorithm for intelligent mempool routing. This algorithm calculates dynamic weights for each mempool node based on real-time system metrics, mempool capacity, and fee affordability.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-algorithm-overview">ğŸ¯ Algorithm Overview<a href="#-algorithm-overview" class="hash-link" aria-label="Direct link to ğŸ¯ Algorithm Overview" title="Direct link to ğŸ¯ Algorithm Overview">â€‹</a></h3>
<p>The HRW weights algorithm provides:</p>
<ul>
<li><strong>Multi-factor Weighting</strong>: Considers system health, mempool capacity, cache performance, and fee affordability</li>
<li><strong>Real-time Metrics</strong>: Live data from Redis for system and mempool performance</li>
<li><strong>Latency-aware Routing</strong>: Network latency measurement and exclusion of unreachable mempools</li>
<li><strong>Dynamic Load Balancing</strong>: Automatically adjusts weights based on real-time metrics</li>
<li><strong>CPU Moving Average</strong>: Smooths out CPU spikes for more stable weight calculations</li>
<li><strong>Configurable Intervals</strong>: Weight update frequency can be customized (default: 5 minutes)</li>
<li><strong>Fee Affordability</strong>: Optional transaction caps for cost-conscious routing</li>
<li><strong>Resource Pressure Handling</strong>: Inverted scoring for lower-is-better metrics</li>
<li><strong>Strictly Positive Weights</strong>: Ensures consistent hashing for HRW</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-weight-calculation-factors">ğŸ“Š Weight Calculation Factors<a href="#-weight-calculation-factors" class="hash-link" aria-label="Direct link to ğŸ“Š Weight Calculation Factors" title="Direct link to ğŸ“Š Weight Calculation Factors">â€‹</a></h3>
<p>The algorithm considers the following metrics:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="system-metrics"><strong>System Metrics</strong><a href="#system-metrics" class="hash-link" aria-label="Direct link to system-metrics" title="Direct link to system-metrics">â€‹</a></h4>
<ul>
<li><strong>CPU Usage</strong>: Lower usage = higher weight (with moving average smoothing)</li>
<li><strong>Memory Usage</strong>: Lower usage = higher weight</li>
<li><strong>Disk Usage</strong>: Lower usage = higher weight</li>
<li><strong>Load Average</strong>: Lower load = higher weight</li>
<li><strong>Network Latency</strong>: Lower latency = higher weight (unreachable mempools excluded)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mempool-metrics"><strong>Mempool Metrics</strong><a href="#mempool-metrics" class="hash-link" aria-label="Direct link to mempool-metrics" title="Direct link to mempool-metrics">â€‹</a></h4>
<ul>
<li><strong>Hot Cache Size</strong>: Available capacity vs. maximum capacity</li>
<li><strong>Total Transactions</strong>: Current load vs. maximum capacity</li>
<li><strong>Cache Hit Rate</strong>: Performance efficiency (higher = better)</li>
<li><strong>Average Fee</strong>: Affordability vs. target fee</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-caps-optional"><strong>Transaction Caps (Optional)</strong><a href="#transaction-caps-optional" class="hash-link" aria-label="Direct link to transaction-caps-optional" title="Direct link to transaction-caps-optional">â€‹</a></h4>
<ul>
<li><strong>Max Fee</strong>: Maximum fee the transaction can pay</li>
<li><strong>Max Priority Fee</strong>: Maximum priority fee for EIP-1559 transactions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-configuration-parameters">ğŸ”§ Configuration Parameters<a href="#-configuration-parameters" class="hash-link" aria-label="Direct link to ğŸ”§ Configuration Parameters" title="Direct link to ğŸ”§ Configuration Parameters">â€‹</a></h3>
<p>The algorithm uses configurable parameters for tuning:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> WeightParams </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Normalization anchors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    MaxHotCache      </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g., 5,000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    MaxTotalTx       </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g., 100,000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    GoodCacheHitPct  </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g., 95%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    GoodLoadAvg      </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g., #vCPUs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    TargetAvgFeeWei  </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g., affordable fee target</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    MinReliability   </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// safety floor, e.g., 0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Blend weights (automatically normalized)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    WFreeCap         </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Free capacity weight (default: 0.30)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    WCacheHit        </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Cache hit rate weight (default: 0.15)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    WLowFee          </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Low fee weight (default: 0.20)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    WLowCPU          </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Low CPU weight (default: 0.12)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    WLowMem          </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Low memory weight (default: 0.10)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    WLowDisk         </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Low disk weight (default: 0.05)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    WLowLoad         </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Low load weight (default: 0.08)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Global congestion throttle</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SurgeFactor      </span><span class="token builtin" style="color:rgb(130, 170, 255)">float64</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 0..1, usually 1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ï¸-weight-scheduler-configuration">âš™ï¸ Weight Scheduler Configuration<a href="#ï¸-weight-scheduler-configuration" class="hash-link" aria-label="Direct link to âš™ï¸ Weight Scheduler Configuration" title="Direct link to âš™ï¸ Weight Scheduler Configuration">â€‹</a></h3>
<p>The weight scheduler runs in the background and periodically updates mempool weights:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start with default 5-minute interval</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start with custom weight update interval (e.g., 2 minutes)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all -weight-interval=2m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start server with custom weight interval</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -weight-interval=1m -port=8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Weight Scheduler Features:</strong></p>
<ul>
<li><strong>Background Process</strong>: Runs concurrently with the main server</li>
<li><strong>Configurable Interval</strong>: Set update frequency via command-line argument</li>
<li><strong>Real-time Metrics</strong>: Fetches live data from Redis</li>
<li><strong>Latency Measurement</strong>: Measures network latency to each mempool</li>
<li><strong>Automatic Exclusion</strong>: Skips unreachable or high-latency mempools</li>
<li><strong>Detailed Logging</strong>: Comprehensive logs of weight calculations and routing decisions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-testing-the-algorithm">ğŸ§ª Testing the Algorithm<a href="#-testing-the-algorithm" class="hash-link" aria-label="Direct link to ğŸ§ª Testing the Algorithm" title="Direct link to ğŸ§ª Testing the Algorithm">â€‹</a></h3>
<p>Test the HRW weights algorithm with sample data:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Test with default parameters and sample metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE test-weights</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Test with real-time Redis metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE test-weights -redis=localhost:6379</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Sample Output:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ğŸ§® HRW Weights Algorithm Test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ğŸ“Š Sample Metrics:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  System Metrics:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CPU Usage: 45.0%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Memory Usage: 60.0%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Disk Usage: 30.0%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Load Average: 1.20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Mempool Metrics:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Hot Cache Size: 1200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Total Transactions: 8500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Cache Hit Rate: 92.0%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Average Fee: 35000000000 Wei (35.0 Gwei)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Transaction Caps:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Max Fee: 50000000000 Wei (50.0 Gwei)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Max Priority Fee: 20000000000 Wei (20.0 Gwei)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ğŸ¯ Calculated Weight: 0.633813</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">âœ… HRW weights algorithm test completed successfully!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   This weight can be used for consistent hashing in mempool routing.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-integration-with-routing">ğŸ”„ Integration with Routing<a href="#-integration-with-routing" class="hash-link" aria-label="Direct link to ğŸ”„ Integration with Routing" title="Direct link to ğŸ”„ Integration with Routing">â€‹</a></h3>
<p>The calculated weights are used for:</p>
<ol>
<li><strong>Consistent Hashing</strong>: Deterministic mempool selection based on transaction hash</li>
<li><strong>Load Balancing</strong>: Higher weight = higher probability of selection</li>
<li><strong>Performance Optimization</strong>: Routes to best-performing mempools</li>
<li><strong>Cost Optimization</strong>: Considers fee affordability when transaction caps are provided</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-performance-benefits">ğŸ“ˆ Performance Benefits<a href="#-performance-benefits" class="hash-link" aria-label="Direct link to ğŸ“ˆ Performance Benefits" title="Direct link to ğŸ“ˆ Performance Benefits">â€‹</a></h3>
<ul>
<li><strong>Intelligent Routing</strong>: Routes transactions to optimal mempools</li>
<li><strong>Load Distribution</strong>: Prevents overloading of individual mempools</li>
<li><strong>Cost Efficiency</strong>: Considers fee affordability for cost-conscious routing</li>
<li><strong>Real-time Adaptation</strong>: Weights update based on current system state</li>
<li><strong>Fault Tolerance</strong>: Automatically reduces weight of unhealthy nodes</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-modern-hrw-manager-integration">ğŸš€ Modern HRW Manager Integration<a href="#-modern-hrw-manager-integration" class="hash-link" aria-label="Direct link to ğŸš€ Modern HRW Manager Integration" title="Direct link to ğŸš€ Modern HRW Manager Integration">â€‹</a></h2>
<p>The MRE now includes a <strong>complete HRW Manager</strong> with epoch-based configuration and Redis Streams integration for high-performance transaction routing.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-hrw-manager-features">ğŸ¯ HRW Manager Features<a href="#-hrw-manager-features" class="hash-link" aria-label="Direct link to ğŸ¯ HRW Manager Features" title="Direct link to ğŸ¯ HRW Manager Features">â€‹</a></h3>
<ul>
<li><strong>Epoch-based Configuration</strong>: Historical transaction placements remain stable while allowing dynamic weight updates</li>
<li><strong>Redis Streams Publishing</strong>: Real-time transaction placement decisions published to Redis Streams</li>
<li><strong>Dynamic Weight Updates</strong>: Automatic weight updates via <code>ChangeWeightage()</code> when new weights are calculated</li>
<li><strong>Multi-format NodeID Support</strong>: Flexible NodeID to ShardID conversion for various naming patterns</li>
<li><strong>Weight Scheduler Integration</strong>: Automatic HRW Manager updates when new weights are calculated</li>
<li><strong>Reflection-based Integration</strong>: Seamless HRW Manager integration without circular imports</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-hrw-manager-workflow">ğŸ”„ HRW Manager Workflow<a href="#-hrw-manager-workflow" class="hash-link" aria-label="Direct link to ğŸ”„ HRW Manager Workflow" title="Direct link to ğŸ”„ HRW Manager Workflow">â€‹</a></h3>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-hrw-manager-configuration">ğŸ“Š HRW Manager Configuration<a href="#-hrw-manager-configuration" class="hash-link" aria-label="Direct link to ğŸ“Š HRW Manager Configuration" title="Direct link to ğŸ“Š HRW Manager Configuration">â€‹</a></h3>
<p>The HRW Manager is automatically initialized with mempool nodes:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// HRW Manager initialization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">hrwManager</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> HRW</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewManager</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;localhost:6379&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Redis Streams address</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Configure shards based on connected mempools</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> HRW</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Epoch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Replicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Primary + 2 replicas</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Shards</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">HRW</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Shard</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">err </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> hrwManager</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">UpdateFromConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-dynamic-weight-updates">ğŸ”§ Dynamic Weight Updates<a href="#-dynamic-weight-updates" class="hash-link" aria-label="Direct link to ğŸ”§ Dynamic Weight Updates" title="Direct link to ğŸ”§ Dynamic Weight Updates">â€‹</a></h3>
<p>When the Weight Scheduler calculates new weights, they are automatically applied to the HRW Manager:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Weight Scheduler integration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ws </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">WeightScheduler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">updateHRWManagerWeights</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weights </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">MempoolWeight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> weight </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">range</span><span class="token plain"> weights </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Error </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            shardID </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">nodeIDToShardID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">NodeID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            normalizedWeight </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">normalizeWeight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Call ChangeWeightage on HRW Manager</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> ws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">callChangeWeightage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">currentEpoch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> shardID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> normalizedWeight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-nodeid-to-shardid-conversion">ğŸ¯ NodeID to ShardID Conversion<a href="#-nodeid-to-shardid-conversion" class="hash-link" aria-label="Direct link to ğŸ¯ NodeID to ShardID Conversion" title="Direct link to ğŸ¯ NodeID to ShardID Conversion">â€‹</a></h3>
<p>The system supports various NodeID formats:</p>
<ul>
<li><strong>Pure Numbers</strong>: <code>&quot;1&quot;</code> â†’ shard ID <code>1</code></li>
<li><strong>Hyphen-separated</strong>: <code>&quot;mempool-1&quot;</code> â†’ shard ID <code>1</code></li>
<li><strong>Embedded numbers</strong>: <code>&quot;mempool1&quot;</code> â†’ shard ID <code>1</code></li>
<li><strong>Hash-based fallback</strong>: <code>&quot;custom-node-abc&quot;</code> â†’ consistent hash-based shard ID</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-redis-streams-integration">ğŸ“¡ Redis Streams Integration<a href="#-redis-streams-integration" class="hash-link" aria-label="Direct link to ğŸ“¡ Redis Streams Integration" title="Direct link to ğŸ“¡ Redis Streams Integration">â€‹</a></h3>
<p>Every transaction placement is automatically published to Redis Streams:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;QueryID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;tx_0x123...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;UserID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;system&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;LookupType&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;tx_placement&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Fields&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;tx_hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x123...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;epoch&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;primary&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;replicas&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2,3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Timestamp&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2025-01-21T12:00:00Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;Result&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Epoch&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Primary&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Replicas&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;All&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-testing-hrw-manager">ğŸ§ª Testing HRW Manager<a href="#-testing-hrw-manager" class="hash-link" aria-label="Direct link to ğŸ§ª Testing HRW Manager" title="Direct link to ğŸ§ª Testing HRW Manager">â€‹</a></h3>
<p>Test the complete HRW Manager integration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Test HRW weight calculation with Redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./mre test-weights -redis localhost:6379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start server with HRW Manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./mre server -port 8080 -redis localhost:6379</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start all modules with HRW Manager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./mre all -server-port 8080 -redis localhost:6379</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-hrw-manager-benefits">ğŸ“ˆ HRW Manager Benefits<a href="#-hrw-manager-benefits" class="hash-link" aria-label="Direct link to ğŸ“ˆ HRW Manager Benefits" title="Direct link to ğŸ“ˆ HRW Manager Benefits">â€‹</a></h3>
<ul>
<li><strong>Epoch Stability</strong>: Historical transactions maintain their placement</li>
<li><strong>Dynamic Updates</strong>: New transactions use updated weights</li>
<li><strong>Real-time Publishing</strong>: All placement decisions are streamed to Redis</li>
<li><strong>Flexible NodeID Support</strong>: Works with any mempool naming convention</li>
<li><strong>Automatic Integration</strong>: No manual intervention required</li>
<li><strong>High Performance</strong>: Optimized for 400K+ transactions per second</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-configuration">ğŸ”§ Configuration<a href="#-configuration" class="hash-link" aria-label="Direct link to ğŸ”§ Configuration" title="Direct link to ğŸ”§ Configuration">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-configuration-configyml">Server Configuration (<code>config.yml</code>)<a href="#server-configuration-configyml" class="hash-link" aria-label="Direct link to server-configuration-configyml" title="Direct link to server-configuration-configyml">â€‹</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Application Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MRE&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;development&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1.0.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Network Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">network</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">defaultport</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">15051</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;TCP&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxNodeConnections</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># NATS JetStream Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">nats</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4222</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">httpPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8222</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">dataDir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./nats-data&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxMemoryStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2GB&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxFileStore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;50GB&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxConnections</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">maxPayload</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;10MB&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mempool-server-configuration">Mempool Server Configuration<a href="#mempool-server-configuration" class="hash-link" aria-label="Direct link to Mempool Server Configuration" title="Direct link to Mempool Server Configuration">â€‹</a></h3>
<p>Update the mempool server addresses in <code>server/server.go</code>:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempoolConfigs </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    nodeID  </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    address </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.100.40:16002&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.1.101:8080&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Mempool-3&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;10.0.0.50:8080&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-monitoring">ğŸ“Š Monitoring<a href="#-monitoring" class="hash-link" aria-label="Direct link to ğŸ“Š Monitoring" title="Direct link to ğŸ“Š Monitoring">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nats-jetstream-streams">NATS JetStream Streams<a href="#nats-jetstream-streams" class="hash-link" aria-label="Direct link to NATS JetStream Streams" title="Direct link to NATS JetStream Streams">â€‹</a></h3>
<ul>
<li><strong><code>mempool_system_metrics</code></strong>: System performance metrics (7-day retention)</li>
<li><strong><code>mempool_mempool_metrics</code></strong>: Mempool-specific metrics (7-day retention)</li>
<li><strong><code>mempool_application_logs</code></strong>: Application logs and events (3-day retention)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="redis-data-structure">Redis Data Structure<a href="#redis-data-structure" class="hash-link" aria-label="Direct link to Redis Data Structure" title="Direct link to Redis Data Structure">â€‹</a></h3>
<p>The logging server stores data in Redis with the following structure:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Individual log entries (with TTL: 24 hours)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:system:mempool-clean-01:1757000902710939000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:mempool:mempool-clean-01:1757000902710939001</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:application:mempool-clean-01:1757000902710939002</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Time-series lists for recent logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:system:list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:mempool:list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:application:list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Structured metrics hashes (current state)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:system:metrics:mempool-clean-01</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mempool:logs:mempool:metrics:mempool-clean-01</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-redis-commands">Sample Redis Commands:<a href="#sample-redis-commands" class="hash-link" aria-label="Direct link to Sample Redis Commands:" title="Direct link to Sample Redis Commands:">â€‹</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get all keys</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli keys &quot;mempool:logs:*&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get latest system metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli hgetall &quot;mempool:logs:system:metrics:mempool-clean-01&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get recent log entries</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli lrange &quot;mempool:logs:system:list&quot; 0 9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Get specific log entry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis-cli get &quot;mempool:logs:system:mempool-clean-01:1757000902710939000&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="health-checks">Health Checks<a href="#health-checks" class="hash-link" aria-label="Direct link to Health Checks" title="Direct link to Health Checks">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check NATS server status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl http://localhost:8222/varz</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check gRPC server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">grpcurl -plaintext localhost:8080 list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Monitor streams</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nats stream list --server=nats://localhost:4222</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ï¸-development">ğŸ› ï¸ Development<a href="#ï¸-development" class="hash-link" aria-label="Direct link to ğŸ› ï¸ Development" title="Direct link to ğŸ› ï¸ Development">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-structure">Project Structure<a href="#project-structure" class="hash-link" aria-label="Direct link to Project Structure" title="Direct link to Project Structure">â€‹</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Mempool-Routing-Engine/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ internal/                  # Internal modules</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚   â”œâ”€â”€ hrw/                  # HRW weights algorithm</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚   â”‚   â””â”€â”€ weights.go        # Weight calculation implementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚   â””â”€â”€ redisconn/            # Redis connection utilities</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ logServer/                 # NATS consumer and Redis integration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚   â”œâ”€â”€ consumer.go           # NATS consumer implementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚   â””â”€â”€ redis.go              # Redis client and operations</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ proto/                     # Protobuf definitions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ server/                    # gRPC server implementation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ logger/                    # Logging utilities and NATS publisher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ scripts/                   # Setup and utility scripts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ Tests/                     # Test clients and utilities</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ config.yml                 # Application configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ nats-server.conf          # NATS server configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ main.go                   # Unified CLI with subcommands</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ Makefile                  # Build automation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="available-make-targets">Available Make Targets<a href="#available-make-targets" class="hash-link" aria-label="Direct link to Available Make Targets" title="Direct link to Available Make Targets">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">make help                    # Show all available targets</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make build                   # Build integrated MRE binary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-server              # Start MRE server (use PORT=9090 for custom port)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-logging             # Start MRE logging server (use STREAM=system for specific stream)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-all                 # Start all MRE modules simultaneously (use SERVER_PORT=9090 for custom port)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-custom              # Run MRE with custom command (use CMD=&#x27;server -port=9090&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make start-routing           # Start NATS routing engine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make setup-streams           # Create JetStream streams</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make test                    # Run tests</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make fmt                     # Format code</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make lint                    # Lint code</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integrated-mre-binary">Integrated MRE Binary<a href="#integrated-mre-binary" class="hash-link" aria-label="Direct link to Integrated MRE Binary" title="Direct link to Integrated MRE Binary">â€‹</a></h3>
<p>The project now uses a single integrated MRE binary that contains all functionality:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Build the integrated MRE binary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make build</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># This creates:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># - MRE                     # Integrated MRE binary with all subcommands</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># - bin/test-client         # Test client for integration testing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Run all modules simultaneously</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Run with custom port</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-server PORT=9090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make run-all SERVER_PORT=9090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Direct execution</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE loggingServer -stream=all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-features">Adding New Features<a href="#adding-new-features" class="hash-link" aria-label="Direct link to Adding New Features" title="Direct link to Adding New Features">â€‹</a></h3>
<ol>
<li><strong>New gRPC Methods</strong>: Add to <code>proto/mempool.proto</code> and regenerate</li>
<li><strong>New Validation Rules</strong>: Update <code>isValidTransactionStruct()</code> in <code>main.go</code></li>
<li><strong>New Routing Logic</strong>: Modify <code>selectMempoolForTransaction()</code> in <code>main.go</code></li>
<li><strong>New Subcommands</strong>: Add to <code>getSubcommands()</code> in <code>main.go</code></li>
<li><strong>New Streams</strong>: Add to <code>scripts/setup-streams.sh</code></li>
<li><strong>HRW Algorithm Tuning</strong>: Modify <code>WeightParams</code> in <code>internal/hrw/weights.go</code></li>
<li><strong>New Weight Factors</strong>: Add new metrics to <code>SystemMetrics</code> or <code>MempoolMetrics</code></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-security-considerations">ğŸ”’ Security Considerations<a href="#-security-considerations" class="hash-link" aria-label="Direct link to ğŸ”’ Security Considerations" title="Direct link to ğŸ”’ Security Considerations">â€‹</a></h2>
<ul>
<li><strong>Authentication</strong>: Currently uses insecure credentials (development only)</li>
<li><strong>TLS</strong>: Available for NATS communication (see TLS Setup section)</li>
<li><strong>Input Validation</strong>: Comprehensive transaction validation implemented</li>
<li><strong>Rate Limiting</strong>: Not implemented (consider adding)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-tls-certificate-setup">ğŸ” TLS Certificate Setup<a href="#-tls-certificate-setup" class="hash-link" aria-label="Direct link to ğŸ” TLS Certificate Setup" title="Direct link to ğŸ” TLS Certificate Setup">â€‹</a></h2>
<p>The MRE supports TLS encryption for secure NATS communication. Use the included certificate generation script to create production-ready certificates.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick Start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick Start" title="Direct link to Quick Start">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Generate certificates with auto-detected public IP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/generate-certs.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Generate certificates for Google Cloud VM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/generate-certs.sh -p 34.123.45.67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Show all available options</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/generate-certs.sh --help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="certificate-generation-options">Certificate Generation Options<a href="#certificate-generation-options" class="hash-link" aria-label="Direct link to Certificate Generation Options" title="Direct link to Certificate Generation Options">â€‹</a></h3>
<table><thead><tr><th>Option</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>-p, --public-ip IP</code></td><td>Public IP address to include in certificate</td><td>Auto-detect</td></tr><tr><td><code>-d, --days DAYS</code></td><td>Certificate validity in days</td><td>365</td></tr><tr><td><code>-o, --output DIR</code></td><td>Output directory for certificates</td><td>./certs</td></tr><tr><td><code>-c, --country CODE</code></td><td>Country code</td><td>US</td></tr><tr><td><code>-s, --state STATE</code></td><td>State/Province</td><td>California</td></tr><tr><td><code>-l, --city CITY</code></td><td>City</td><td>San Francisco</td></tr><tr><td><code>-n, --org ORG</code></td><td>Organization</td><td>Mempool Routing Engine</td></tr><tr><td><code>-u, --ou OU</code></td><td>Organizational Unit</td><td>Protocol Team</td></tr><tr><td><code>-e, --email EMAIL</code></td><td>Email address</td><td><a href="mailto:admin@mempool-routing.local" target="_blank" rel="noopener noreferrer">admin@mempool-routing.local</a></td></tr><tr><td><code>-h, --help</code></td><td>Show help message</td><td>-</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Auto-detect public IP (recommended)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/generate-certs.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Specify public IP for cloud deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/generate-certs.sh -p 34.123.45.67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Production setup with 2-year validity</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/generate-certs.sh -p 34.123.45.67 -d 730 -o /etc/ssl/certs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Custom organization details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./scripts/generate-certs.sh -p 34.123.45.67 -c &quot;CA&quot; -s &quot;Ontario&quot; -l &quot;Toronto&quot; -n &quot;My Company&quot; -u &quot;IT Department&quot; -e &quot;admin@mycompany.com&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generated-certificates">Generated Certificates<a href="#generated-certificates" class="hash-link" aria-label="Direct link to Generated Certificates" title="Direct link to Generated Certificates">â€‹</a></h3>
<p>The script creates the following certificate files:</p>
<ul>
<li><code>ca.crt</code> - Certificate Authority certificate</li>
<li><code>server.crt</code> - Server certificate (includes public IP)</li>
<li><code>server.key</code> - Server private key</li>
<li><code>client.crt</code> - Client certificate</li>
<li><code>client.key</code> - Client private key</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-tls-with-mre">Using TLS with MRE<a href="#using-tls-with-mre" class="hash-link" aria-label="Direct link to Using TLS with MRE" title="Direct link to Using TLS with MRE">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start MRE with TLS-enabled NATS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE run-all --nats-url=tls://localhost:4222 --nats-tls=true --nats-cert=./certs/client.crt --nats-key=./certs/client.key --nats-ca=./certs/ca.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For detailed TLS setup instructions, see <a href="/docs/NATS_README.md">NATS_README.md</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-production-deployment">ğŸš€ Production Deployment<a href="#-production-deployment" class="hash-link" aria-label="Direct link to ğŸš€ Production Deployment" title="Direct link to ğŸš€ Production Deployment">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-support">Docker Support<a href="#docker-support" class="hash-link" aria-label="Direct link to Docker Support" title="Direct link to Docker Support">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Build Docker image</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make docker-build</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Run container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">make docker-run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gcp-deployment--vcpu-requirements">GCP Deployment &amp; vCPU Requirements<a href="#gcp-deployment--vcpu-requirements" class="hash-link" aria-label="Direct link to GCP Deployment &amp; vCPU Requirements" title="Direct link to GCP Deployment &amp; vCPU Requirements">â€‹</a></h3>
<p>The MRE is designed for high-performance multi-threaded operation with parallel mempool server connections. Here are the recommended GCP instance configurations:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-threading-architecture"><strong>Multi-Threading Architecture</strong><a href="#multi-threading-architecture" class="hash-link" aria-label="Direct link to multi-threading-architecture" title="Direct link to multi-threading-architecture">â€‹</a></h4>
<ul>
<li><strong>15 concurrent goroutines</strong> per request (one per mempool server)</li>
<li><strong>Parallel I/O operations</strong> for maximum performance</li>
<li><strong>Thread-safe data aggregation</strong> across multiple servers</li>
<li><strong>~15x faster</strong> than sequential execution</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="vcpu-requirements"><strong>vCPU Requirements</strong><a href="#vcpu-requirements" class="hash-link" aria-label="Direct link to vcpu-requirements" title="Direct link to vcpu-requirements">â€‹</a></h4>
<table><thead><tr><th>Mempool Count</th><th>Minimum vCPUs</th><th>Recommended vCPUs</th><th>Memory</th><th>Use Case</th></tr></thead><tbody><tr><td>5 mempools</td><td>4 vCPUs</td><td>6-8 vCPUs</td><td>16-32 GB</td><td>Development</td></tr><tr><td>10 mempools</td><td>6 vCPUs</td><td>8-12 vCPUs</td><td>32-64 GB</td><td>Production</td></tr><tr><td><strong>15 mempools</strong></td><td><strong>8 vCPUs</strong></td><td><strong>12-16 vCPUs</strong></td><td><strong>64-128 GB</strong></td><td><strong>High-traffic Production</strong></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gcp-instance-recommendations"><strong>GCP Instance Recommendations</strong><a href="#gcp-instance-recommendations" class="hash-link" aria-label="Direct link to gcp-instance-recommendations" title="Direct link to gcp-instance-recommendations">â€‹</a></h4>
<p><strong>Option 1: Cost-Optimized (Development)</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># e2-standard-4: 4 vCPUs, 16 GB RAM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud compute instances create mempool-routing-dev \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --machine-type=e2-standard-4 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --zone=us-central1-a \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-family=ubuntu-2004-lts \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-project=ubuntu-os-cloud \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --boot-disk-size=50GB \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tags=http-server,https-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Production (Recommended)</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># e2-standard-8: 8 vCPUs, 32 GB RAM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud compute instances create mempool-routing-prod \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --machine-type=e2-standard-8 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --zone=us-central1-a \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-family=ubuntu-2004-lts \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-project=ubuntu-os-cloud \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --boot-disk-size=100GB \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tags=http-server,https-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 3: High-Performance (15+ Mempools)</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># e2-standard-16: 16 vCPUs, 64 GB RAM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud compute instances create mempool-routing-hp \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --machine-type=e2-standard-16 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --zone=us-central1-a \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-family=ubuntu-2004-lts \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-project=ubuntu-os-cloud \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --boot-disk-size=200GB \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tags=http-server,https-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="auto-scaling-configuration"><strong>Auto-Scaling Configuration</strong><a href="#auto-scaling-configuration" class="hash-link" aria-label="Direct link to auto-scaling-configuration" title="Direct link to auto-scaling-configuration">â€‹</a></h4>
<p>For production with variable load:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create instance template</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud compute instance-templates create mempool-routing-template \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --machine-type=e2-standard-8 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-family=ubuntu-2004-lts \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --image-project=ubuntu-os-cloud \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --boot-disk-size=100GB \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tags=http-server,https-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create managed instance group</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud compute instance-groups managed create mempool-routing-group \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --template=mempool-routing-template \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --size=2 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --zone=us-central1-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Configure auto-scaling</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud compute instance-groups managed set-autoscaling mempool-routing-group \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --zone=us-central1-a \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --max-num-replicas=8 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --min-num-replicas=2 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --target-cpu-utilization=0.7</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-monitoring"><strong>Performance Monitoring</strong><a href="#performance-monitoring" class="hash-link" aria-label="Direct link to performance-monitoring" title="Direct link to performance-monitoring">â€‹</a></h4>
<p>Key metrics to monitor:</p>
<ul>
<li><strong>CPU Usage</strong>: Should stay below 70%</li>
<li><strong>Memory Usage</strong>: Should stay below 80%</li>
<li><strong>Goroutine Count</strong>: Monitor for goroutine leaks</li>
<li><strong>Response Time</strong>: Should be &lt; 100ms for most requests</li>
<li><strong>Connection Count</strong>: Monitor mempool connection health</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cost-optimization"><strong>Cost Optimization</strong><a href="#cost-optimization" class="hash-link" aria-label="Direct link to cost-optimization" title="Direct link to cost-optimization">â€‹</a></h4>
<table><thead><tr><th>Instance Type</th><th>vCPUs</th><th>Memory</th><th>Monthly Cost*</th><th>Use Case</th></tr></thead><tbody><tr><td>e2-standard-4</td><td>4</td><td>16 GB</td><td>$100-150</td><td>Development</td></tr><tr><td>e2-standard-8</td><td>8</td><td>32 GB</td><td>$200-300</td><td>Production</td></tr><tr><td>e2-standard-16</td><td>16</td><td>64 GB</td><td>$400-600</td><td>High-traffic</td></tr><tr><td>Preemptible</td><td>8</td><td>32 GB</td><td>$60-90</td><td>Non-critical</td></tr></tbody></table>
<p>*Costs are approximate and vary by region and usage.</p>
<p><strong>Cost-saving tips:</strong></p>
<ul>
<li>Use <strong>Preemptible Instances</strong> for 60-80% savings (non-critical workloads)</li>
<li><strong>Reserved Instances</strong> for 30% savings (predictable workloads)</li>
<li><strong>Committed Use Discounts</strong> for up to 57% savings (1-3 year commitments)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-requirements"><strong>Network Requirements</strong><a href="#network-requirements" class="hash-link" aria-label="Direct link to network-requirements" title="Direct link to network-requirements">â€‹</a></h4>
<ul>
<li><strong>15 concurrent connections</strong> to mempools</li>
<li><strong>Incoming client connections</strong> (gRPC on port 8080)</li>
<li><strong>Bandwidth</strong>: 1-10 Gbps depending on transaction volume</li>
<li><strong>Firewall</strong>: Allow inbound traffic on port 8080</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create firewall rule</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gcloud compute firewall-rules create allow-mempool-routing \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --allow tcp:8080 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --source-ranges 0.0.0.0/0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --description &quot;Allow MRE gRPC traffic&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-deployment">Kubernetes Deployment<a href="#kubernetes-deployment" class="hash-link" aria-label="Direct link to Kubernetes Deployment" title="Direct link to Kubernetes Deployment">â€‹</a></h3>
<p>The <code>config.yml</code> includes Kubernetes-ready configuration for:</p>
<ul>
<li>Resource limits and requests</li>
<li>Health checks (readiness/liveness probes)</li>
<li>Auto-scaling configuration</li>
<li>Volume mounts</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variables">Environment Variables<a href="#environment-variables" class="hash-link" aria-label="Direct link to Environment Variables" title="Direct link to Environment Variables">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># NATS Configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NATS_URL=nats://localhost:4222</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NATS_HTTP_PORT=8222</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># BigQuery Configuration</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GCP_PROJECT_ID=your-project-id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BIGQUERY_DATASET=mempool_logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BIGQUERY_TABLE=application_logs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Logging</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LOG_LEVEL=info</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LOG_FORMAT=json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SERVICE_NAME=mempool-routing-engine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ENVIRONMENT=production</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-contributing">ğŸ¤ Contributing<a href="#-contributing" class="hash-link" aria-label="Direct link to ğŸ¤ Contributing" title="Direct link to ğŸ¤ Contributing">â€‹</a></h2>
<ol>
<li>Fork the repository</li>
<li>Create a feature branch</li>
<li>Make your changes</li>
<li>Add tests</li>
<li>Submit a pull request</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-license">ğŸ“„ License<a href="#-license" class="hash-link" aria-label="Direct link to ğŸ“„ License" title="Direct link to ğŸ“„ License">â€‹</a></h2>
<p>This project is licensed under the MIT License - see the <a href="/docs/LICENSE">LICENSE</a> file for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-troubleshooting">ğŸ†˜ Troubleshooting<a href="#-troubleshooting" class="hash-link" aria-label="Direct link to ğŸ†˜ Troubleshooting" title="Direct link to ğŸ†˜ Troubleshooting">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-issues">Common Issues<a href="#common-issues" class="hash-link" aria-label="Direct link to Common Issues" title="Direct link to Common Issues">â€‹</a></h3>
<p><strong>Binary won&#x27;t run on macOS:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Use go run instead of compiled binary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run . server -port=8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Port already in use:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Use a different port</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE server -port=9090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run . server -port=9090</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>NATS connection failed:</strong></p>
<p><strong>macOS/Linux:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check if NATS server is running</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ps aux | grep nats-server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Restart NATS server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nats-server -c ./nats-server.conf &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Windows:</strong></p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check if NATS server is running</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Get-Process | Where-Object {$_.ProcessName -like &quot;*nats*&quot;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Restart NATS server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Start-Process -NoNewWindow nats-server -ArgumentList &quot;-c&quot;, &quot;./nats-server.conf&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Redis connection failed:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check if Redis container is running</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker ps | grep mempool-redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Start Redis container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker run -d --name mempool-redis -p 6379:6379 redis:7-alpine</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Test Redis connection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli ping</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>gRPC connection refused:</strong></p>
<p><strong>macOS/Linux:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check if server is listening</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lsof -i :8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check server logs for errors</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Windows:</strong></p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check if server is listening</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">netstat -an | findstr :8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check server logs for errors</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Logging server not saving to Redis:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check Redis connection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli ping</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Check Redis keys</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker exec -it mempool-redis redis-cli keys &quot;*&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Restart logging server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./MRE loggingServer -stream=all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go run . loggingServer -stream=all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Windows-specific issues:</strong></p>
<p><strong>PowerShell execution policy:</strong></p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Allow script execution</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Path issues:</strong></p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Use full paths or ensure executables are in PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">.\MRE.exe server -port=8080</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Or add current directory to PATH</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$env:PATH += &quot;;$PWD&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Linux-specific issues:</strong></p>
<p><strong>Permission denied:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Make scripts executable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x ./scripts/setup-streams.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x ./MRE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x ./bin/test-client</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Docker permission issues:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Add user to docker group</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo usermod -aG docker $USER</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Log out and back in, or run:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">newgrp docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getting-help">Getting Help<a href="#getting-help" class="hash-link" aria-label="Direct link to Getting Help" title="Direct link to Getting Help">â€‹</a></h3>
<ul>
<li>Check the logs for detailed error messages</li>
<li>Verify all prerequisites are installed (Go, NATS, Redis, Docker)</li>
<li>Ensure ports 8080, 4222, and 6379 are available</li>
<li>Check network connectivity to mempool servers</li>
<li>Verify Redis container is running and accessible</li>
<li>Check NATS streams are properly configured</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="platform-specific-considerations">Platform-Specific Considerations<a href="#platform-specific-considerations" class="hash-link" aria-label="Direct link to Platform-Specific Considerations" title="Direct link to Platform-Specific Considerations">â€‹</a></h4>
<p><strong>macOS:</strong></p>
<ul>
<li>Ensure Xcode Command Line Tools are installed: <code>xcode-select --install</code></li>
<li>Check Homebrew is up to date: <code>brew update &amp;&amp; brew upgrade</code></li>
</ul>
<p><strong>Linux:</strong></p>
<ul>
<li>Ensure you have <code>unzip</code> installed: <code>sudo apt install unzip</code> (Ubuntu/Debian) or <code>sudo yum install unzip</code> (CentOS/RHEL)</li>
<li>Check if <code>curl</code> is installed: <code>sudo apt install curl</code> or <code>sudo yum install curl</code></li>
<li>Verify Go is properly installed: <code>go version</code></li>
</ul>
<p><strong>Windows:</strong></p>
<ul>
<li>Use PowerShell or Command Prompt as Administrator when needed</li>
<li>Ensure Windows Defender or antivirus isn&#x27;t blocking executables</li>
<li>Check if WSL2 is available for better compatibility: <code>wsl --list --verbose</code></li>
<li>Verify Git is installed and in PATH: <code>git --version</code></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/JupiterMetaZK/docs/edit/main/docs/mempool-routing-engine.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/explorer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Explorer Module</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/roadmap"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Roadmap</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-latest-updates" class="table-of-contents__link toc-highlight">ğŸ†• Latest Updates</a><ul><li><a href="#-modern-hrw-integration-v20" class="table-of-contents__link toc-highlight">ğŸš€ <strong>Modern HRW Integration (v2.0)</strong></a></li><li><a href="#-enhanced-features" class="table-of-contents__link toc-highlight">ğŸ”§ <strong>Enhanced Features</strong></a></li></ul></li><li><a href="#ï¸-architecture-overview" class="table-of-contents__link toc-highlight">ğŸ—ï¸ Architecture Overview</a><ul><li><a href="#system-architecture" class="table-of-contents__link toc-highlight">System Architecture</a></li></ul></li><li><a href="#-quick-start" class="table-of-contents__link toc-highlight">ğŸš€ Quick Start</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#-quick-start-command" class="table-of-contents__link toc-highlight">ğŸš€ Quick Start Command</a></li><li><a href="#-mempool-configuration" class="table-of-contents__link toc-highlight">ğŸ“‹ Mempool Configuration</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#build-and-run" class="table-of-contents__link toc-highlight">Build and Run</a></li><li><a href="#start-the-system" class="table-of-contents__link toc-highlight">Start the System</a></li><li><a href="#command-line-options" class="table-of-contents__link toc-highlight">Command-Line Options</a></li></ul></li><li><a href="#-running-all-modules" class="table-of-contents__link toc-highlight">ğŸš€ Running All Modules</a><ul><li><a href="#quick-start-with-run-all" class="table-of-contents__link toc-highlight">Quick Start with <code>run-all</code></a></li><li><a href="#using-makefile" class="table-of-contents__link toc-highlight">Using Makefile</a></li><li><a href="#what-run-all-does" class="table-of-contents__link toc-highlight">What <code>run-all</code> Does</a></li><li><a href="#running-modules-separately" class="table-of-contents__link toc-highlight">Running Modules Separately</a></li></ul></li><li><a href="#-testing" class="table-of-contents__link toc-highlight">ğŸ§ª Testing</a><ul><li><a href="#high-throughput-testing" class="table-of-contents__link toc-highlight">High Throughput Testing</a></li><li><a href="#redis-integration-testing" class="table-of-contents__link toc-highlight">Redis Integration Testing</a></li><li><a href="#test-with-grpcurl" class="table-of-contents__link toc-highlight">Test with grpcurl</a></li><li><a href="#test-results" class="table-of-contents__link toc-highlight">Test Results</a></li></ul></li><li><a href="#-api-reference" class="table-of-contents__link toc-highlight">ğŸ“¡ API Reference</a><ul><li><a href="#grpc-service-methods" class="table-of-contents__link toc-highlight">gRPC Service Methods</a></li><li><a href="#transaction-validation" class="table-of-contents__link toc-highlight">Transaction Validation</a></li></ul></li><li><a href="#-hrw-weights-algorithm" class="table-of-contents__link toc-highlight">ğŸ§® HRW Weights Algorithm</a><ul><li><a href="#-algorithm-overview" class="table-of-contents__link toc-highlight">ğŸ¯ Algorithm Overview</a></li><li><a href="#-weight-calculation-factors" class="table-of-contents__link toc-highlight">ğŸ“Š Weight Calculation Factors</a></li><li><a href="#-configuration-parameters" class="table-of-contents__link toc-highlight">ğŸ”§ Configuration Parameters</a></li><li><a href="#ï¸-weight-scheduler-configuration" class="table-of-contents__link toc-highlight">âš™ï¸ Weight Scheduler Configuration</a></li><li><a href="#-testing-the-algorithm" class="table-of-contents__link toc-highlight">ğŸ§ª Testing the Algorithm</a></li><li><a href="#-integration-with-routing" class="table-of-contents__link toc-highlight">ğŸ”„ Integration with Routing</a></li><li><a href="#-performance-benefits" class="table-of-contents__link toc-highlight">ğŸ“ˆ Performance Benefits</a></li></ul></li><li><a href="#-modern-hrw-manager-integration" class="table-of-contents__link toc-highlight">ğŸš€ Modern HRW Manager Integration</a><ul><li><a href="#-hrw-manager-features" class="table-of-contents__link toc-highlight">ğŸ¯ HRW Manager Features</a></li><li><a href="#-hrw-manager-workflow" class="table-of-contents__link toc-highlight">ğŸ”„ HRW Manager Workflow</a></li><li><a href="#-hrw-manager-configuration" class="table-of-contents__link toc-highlight">ğŸ“Š HRW Manager Configuration</a></li><li><a href="#-dynamic-weight-updates" class="table-of-contents__link toc-highlight">ğŸ”§ Dynamic Weight Updates</a></li><li><a href="#-nodeid-to-shardid-conversion" class="table-of-contents__link toc-highlight">ğŸ¯ NodeID to ShardID Conversion</a></li><li><a href="#-redis-streams-integration" class="table-of-contents__link toc-highlight">ğŸ“¡ Redis Streams Integration</a></li><li><a href="#-testing-hrw-manager" class="table-of-contents__link toc-highlight">ğŸ§ª Testing HRW Manager</a></li><li><a href="#-hrw-manager-benefits" class="table-of-contents__link toc-highlight">ğŸ“ˆ HRW Manager Benefits</a></li></ul></li><li><a href="#-configuration" class="table-of-contents__link toc-highlight">ğŸ”§ Configuration</a><ul><li><a href="#server-configuration-configyml" class="table-of-contents__link toc-highlight">Server Configuration (<code>config.yml</code>)</a></li><li><a href="#mempool-server-configuration" class="table-of-contents__link toc-highlight">Mempool Server Configuration</a></li></ul></li><li><a href="#-monitoring" class="table-of-contents__link toc-highlight">ğŸ“Š Monitoring</a><ul><li><a href="#nats-jetstream-streams" class="table-of-contents__link toc-highlight">NATS JetStream Streams</a></li><li><a href="#redis-data-structure" class="table-of-contents__link toc-highlight">Redis Data Structure</a></li><li><a href="#health-checks" class="table-of-contents__link toc-highlight">Health Checks</a></li></ul></li><li><a href="#ï¸-development" class="table-of-contents__link toc-highlight">ğŸ› ï¸ Development</a><ul><li><a href="#project-structure" class="table-of-contents__link toc-highlight">Project Structure</a></li><li><a href="#available-make-targets" class="table-of-contents__link toc-highlight">Available Make Targets</a></li><li><a href="#integrated-mre-binary" class="table-of-contents__link toc-highlight">Integrated MRE Binary</a></li><li><a href="#adding-new-features" class="table-of-contents__link toc-highlight">Adding New Features</a></li></ul></li><li><a href="#-security-considerations" class="table-of-contents__link toc-highlight">ğŸ”’ Security Considerations</a></li><li><a href="#-tls-certificate-setup" class="table-of-contents__link toc-highlight">ğŸ” TLS Certificate Setup</a><ul><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick Start</a></li><li><a href="#certificate-generation-options" class="table-of-contents__link toc-highlight">Certificate Generation Options</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#generated-certificates" class="table-of-contents__link toc-highlight">Generated Certificates</a></li><li><a href="#using-tls-with-mre" class="table-of-contents__link toc-highlight">Using TLS with MRE</a></li></ul></li><li><a href="#-production-deployment" class="table-of-contents__link toc-highlight">ğŸš€ Production Deployment</a><ul><li><a href="#docker-support" class="table-of-contents__link toc-highlight">Docker Support</a></li><li><a href="#gcp-deployment--vcpu-requirements" class="table-of-contents__link toc-highlight">GCP Deployment &amp; vCPU Requirements</a></li><li><a href="#kubernetes-deployment" class="table-of-contents__link toc-highlight">Kubernetes Deployment</a></li><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment Variables</a></li></ul></li><li><a href="#-contributing" class="table-of-contents__link toc-highlight">ğŸ¤ Contributing</a></li><li><a href="#-license" class="table-of-contents__link toc-highlight">ğŸ“„ License</a></li><li><a href="#-troubleshooting" class="table-of-contents__link toc-highlight">ğŸ†˜ Troubleshooting</a><ul><li><a href="#common-issues" class="table-of-contents__link toc-highlight">Common Issues</a></li><li><a href="#getting-help" class="table-of-contents__link toc-highlight">Getting Help</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://zkjm.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">JupiterMetaZK</a></li><li class="footer__item"><a href="https://github.com/JupiterMetaZK/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2025 JupiterMetaZK. All Rights Reserved.</div></div></div></footer></div>
</body>
</html>